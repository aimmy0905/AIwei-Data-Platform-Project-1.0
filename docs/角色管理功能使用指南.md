# 角色管理功能使用指南

## 功能概述

艾维数据平台的角色管理功能基于职务进行设计，将原有的"用户管理"升级为更加灵活和实用的"角色管理"系统。该系统支持按部门和职级管理不同角色，并提供精细化的权限控制。

## 主要特性

### 1. 角色管理
- **基于职务的角色设计**：每个角色对应实际的工作职务
- **部门分类**：支持销售部、运营部、财务部、系统管理等部门
- **职级层次**：包含管理员、总监、经理、专员四个层级
- **状态管理**：支持角色的启用和禁用
- **完整的CRUD操作**：创建、查看、编辑、删除角色

### 2. 权限设置
- **模块化权限**：按功能模块组织权限（数据看板、客户管理、项目管理等）
- **权限分类**：查看、编辑、删除、管理四种权限类型
- **批量操作**：支持全选、清空等批量权限设置
- **实时保存**：权限配置实时保存，立即生效

## 使用说明

### 访问角色管理

1. 使用超级管理员账号登录系统
2. 在侧边栏中找到"系统设置"菜单
3. 点击展开后选择"角色管理"

### 角色管理操作

#### 查看角色列表
- 角色以卡片形式展示，显示角色名称、描述、部门、职级等信息
- 支持按部门、职级、状态进行筛选
- 支持角色名称搜索
- 显示每个角色的权限数量

#### 创建新角色
1. 点击页面右上角的"添加角色"按钮
2. 填写角色信息：
   - **角色名称**：英文标识符（必填）
   - **显示名称**：中文显示名称（必填）
   - **角色描述**：角色的详细说明
   - **所属部门**：选择角色所属的部门（必填）
   - **职级**：选择角色的职级层次（必填）
   - **状态**：选择启用或禁用
3. 点击"保存"按钮完成创建

#### 编辑角色
1. 在角色卡片上点击"编辑"按钮（铅笔图标）
2. 修改角色信息
3. 点击"保存"按钮保存更改

#### 删除角色
1. 在角色卡片上点击"删除"按钮（垃圾桶图标）
2. 确认删除操作
3. **注意**：超级管理员角色不能被删除

### 权限设置操作

#### 访问权限设置
1. 在侧边栏中找到"系统设置"菜单
2. 点击展开后选择"权限设置"

#### 配置角色权限
1. **选择角色**：在角色卡片中点击要配置权限的角色
2. **查看权限模块**：系统会显示所有可用的权限模块
3. **设置权限**：
   - 勾选具体的权限项
   - 使用模块级别的"全选"快速选择整个模块的权限
   - 使用页面级别的"全选"/"清空"进行批量操作
4. **保存权限**：点击"保存权限"按钮保存配置

#### 权限模块说明
- **数据看板**：数据看板查看和导出权限
- **客户管理**：客户信息的查看、创建、编辑、删除权限
- **项目管理**：项目信息的查看、创建、编辑、删除权限
- **部门管理**：部门信息和绩效管理权限
- **业务看板**：业务相关数据看板权限
- **财务管理**：财务数据和服务费管理权限
- **系统管理**：角色和权限管理权限

## 预定义角色

系统预置了以下角色，涵盖了常见的工作职务：

### 系统管理
- **超级管理员**：拥有所有权限，不可删除

### 销售部门
- **销售总监**：销售部门最高权限，可管理整个销售团队
- **销售经理**：销售团队管理权限，可管理下属销售专员
- **销售专员**：基础销售权限，主要负责客户开发和维护

### 运营部门
- **运营总监**：运营部门最高权限，可管理整个运营团队
- **项目经理**：项目执行管理权限，负责项目的具体执行
- **Google优化师**：Google广告平台优化权限
- **Meta优化师**：Meta(Facebook)广告平台优化权限
- **Bing优化师**：Bing广告平台优化权限
- **Criteo优化师**：Criteo广告平台优化权限

### 财务部门
- **财务总监**：财务部门最高权限，可管理财务相关的所有功能

## 最佳实践

### 角色设计原则
1. **最小权限原则**：只授予完成工作所需的最小权限
2. **职责分离**：不同职责的角色应该有明确的权限边界
3. **层级管理**：上级角色应该包含下级角色的权限

### 权限配置建议
1. **定期审查**：定期检查和更新角色权限配置
2. **测试验证**：在正式环境中应用前，先在测试环境验证权限配置
3. **文档记录**：记录每次权限变更的原因和时间

### 安全注意事项
1. **超级管理员账号**：严格控制超级管理员账号的使用
2. **权限变更日志**：系统会记录权限变更历史，便于审计
3. **定期清理**：及时禁用或删除不再使用的角色

## 常见问题

### Q: 如何为新员工创建角色？
A: 根据新员工的职务和部门，选择合适的预定义角色，或者基于现有角色创建新的角色。

### Q: 权限更改后多久生效？
A: 权限更改会立即生效，用户下次操作时就会应用新的权限设置。

### Q: 可以同时给一个用户分配多个角色吗？
A: 当前版本每个用户只能分配一个角色。如果需要复合权限，建议创建新的角色。

### Q: 如何备份角色和权限配置？
A: 系统的角色和权限配置存储在数据库中，通过数据库备份即可保存配置。

## 技术说明

### 数据结构
- **角色数据**：包含角色基本信息、部门、职级、权限列表等
- **权限数据**：按模块和类别组织的权限项
- **权限配置**：角色与权限的关联关系

### API接口
- `roleAPI.getRoles()` - 获取角色列表
- `roleAPI.createRole()` - 创建角色
- `roleAPI.updateRole()` - 更新角色
- `roleAPI.deleteRole()` - 删除角色
- `permissionAPI.updateRolePermissions()` - 更新角色权限

### 类型定义
系统使用TypeScript进行类型定义，确保数据结构的一致性和类型安全。

---

通过这个角色管理功能，您可以更好地管理团队成员的系统访问权限，确保数据安全的同时提高工作效率。如有任何问题，请联系系统管理员。