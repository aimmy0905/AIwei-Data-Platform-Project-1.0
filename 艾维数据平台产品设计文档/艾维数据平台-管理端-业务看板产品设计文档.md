# 艾维数据平台-管理端-业务看板产品设计文档

## 1. 文档概述

### 1.1 文档信息
- **文档名称**: 艾维数据平台-管理端-业务看板产品设计文档
- **版本**: v1.0
- **创建日期**: 2025-07-03
- **最后更新**: 2025-07-03
- **当前范围**: 销售部门业务看板（销售总监、销售经理、销售人员）+ 运营部门业务看板（项目总监、项目经理、Google优化师、Meta优化师、Criteo优化师、Bing优化师）+ 财务部门业务看板

### 1.2 产品概述
业务看板是艾维数据平台管理端的核心数据展示模块，为不同角色的用户提供个性化的业务数据视图。本文档重点设计销售部门的三个角色看板功能，支持角色切换和权限控制。

### 1.3 设计原则
- **角色导向**: 基于用户角色提供差异化的数据视图
- **数据驱动**: 以实时业务数据为核心的决策支持
- **交互友好**: 直观的操作界面和流畅的用户体验
- **响应式设计**: 适配不同设备和屏幕尺寸

## 2. 角色权限与切换设计

### 2.1 角色权限体系

#### 2.1.1 角色定义
```javascript
const BUSINESS_ROLES = {
  // 销售部门角色
  SALES_DIRECTOR: {
    code: 'sales_director',
    name: '销售总监',
    department: 'sales',
    level: 1,
    permissions: ['view_all_sales_data', 'view_team_performance', 'view_customer_details', 'export_reports']
  },
  SALES_MANAGER: {
    code: 'sales_manager',
    name: '销售经理',
    department: 'sales',
    level: 2,
    permissions: ['view_team_sales_data', 'view_team_performance', 'view_customer_details', 'export_reports']
  },
  SALES_PERSON: {
    code: 'sales_person',
    name: '销售人员',
    department: 'sales',
    level: 3,
    permissions: ['view_own_sales_data', 'view_own_performance', 'view_assigned_customers']
  },

  // 运营部门角色
  PROJECT_DIRECTOR: {
    code: 'project_director',
    name: '项目总监',
    department: 'operations',
    level: 1,
    permissions: ['view_all_operation_data', 'view_all_departments', 'view_platform_analysis', 'view_customer_quality', 'export_reports']
  },
  PROJECT_MANAGER: {
    code: 'project_manager',
    name: '项目经理',
    department: 'operations',
    level: 2,
    permissions: ['view_department_operation_data', 'view_team_performance', 'view_customer_details', 'export_reports']
  },

  // 优化师角色
  GOOGLE_OPTIMIZER: {
    code: 'google_optimizer',
    name: 'Google优化师',
    department: 'operations',
    level: 3,
    permissions: ['view_own_customers', 'view_google_platform_data', 'view_customer_performance', 'manage_google_accounts']
  },
  META_OPTIMIZER: {
    code: 'meta_optimizer',
    name: 'Meta优化师',
    department: 'operations',
    level: 3,
    permissions: ['view_own_customers', 'view_meta_platform_data', 'view_customer_performance', 'manage_meta_accounts']
  },
  CRITEO_OPTIMIZER: {
    code: 'criteo_optimizer',
    name: 'Criteo优化师',
    department: 'operations',
    level: 3,
    permissions: ['view_own_customers', 'view_criteo_platform_data', 'view_customer_performance', 'manage_criteo_accounts']
  },
  BING_OPTIMIZER: {
    code: 'bing_optimizer',
    name: 'Bing优化师',
    department: 'operations',
    level: 3,
    permissions: ['view_own_customers', 'view_bing_platform_data', 'view_customer_performance', 'manage_bing_accounts']
  },

  // 财务部门角色
  FINANCE_DIRECTOR: {
    code: 'finance_director',
    name: '财务总监',
    department: 'finance',
    level: 1,
    permissions: ['view_all_financial_data', 'view_revenue_analysis', 'view_cost_analysis', 'view_profit_analysis', 'export_financial_reports']
  }
}
```

#### 2.1.2 数据权限范围
**销售部门**:
- **销售总监**: 查看全公司销售数据，包括所有销售人员和客户信息
- **销售经理**: 查看所管理团队的销售数据和客户信息
- **销售人员**: 仅查看个人销售数据和负责的客户信息

**运营部门**:
- **项目总监**: 查看全公司运营数据，包括所有部门的项目数据、客户分析、平台数据
- **项目经理**: 查看所管理部门的运营数据和项目信息
- **Google优化师**: 查看负责的Google平台客户数据和广告投放数据
- **Meta优化师**: 查看负责的Meta平台客户数据和广告投放数据
- **Criteo优化师**: 查看负责的Criteo平台客户数据和广告投放数据
- **Bing优化师**: 查看负责的Bing平台客户数据和广告投放数据

**财务部门**:
- **财务总监**: 查看全公司财务数据，包括收入分析、成本分析、利润分析等

### 2.2 角色切换组件设计

#### 2.2.1 组件位置与布局
```
顶部导航栏
├── Logo区域
├── 角色切换组件 ← 位置
├── 用户信息区域
└── 系统设置区域
```

#### 2.2.2 角色切换器组件
**组件名称**: RoleSwitcher

**UI设计**:
- **展示形式**: 下拉选择器 + 角色图标
- **当前角色显示**: 角色名称 + 权限级别标识
- **切换选项**: 用户拥有的所有角色列表
- **视觉标识**: 不同角色使用不同颜色和图标

**字段设计**:
```typescript
interface RoleSwitcherProps {
  currentRole: string;           // 当前角色代码
  availableRoles: Role[];        // 可切换的角色列表
  onRoleChange: (role: string) => void;  // 角色切换回调
}

interface Role {
  code: string;                  // 角色代码
  name: string;                  // 角色名称
  level: number;                 // 权限级别
  icon: string;                  // 角色图标
  color: string;                 // 主题色
}
```

**交互设计**:
1. 点击角色切换器显示下拉菜单
2. 选择新角色后显示确认对话框
3. 确认后刷新页面数据，保持当前页面路由
4. 角色切换状态保存到本地存储

## 3. 销售总监看板设计

### 3.1 页面整体布局

```
销售总监看板页面
├── 角色切换区域
├── 时间选择器区域
├── 核心指标卡片区域
├── 目标完成情况模块
├── 新单服务费及单量完成模块
├── 新签客户毛利完成模块
├── 所有客户毛利完成模块
├── 流失客户分析模块
├── 销售完成情况模块
├── 员工总毛利完成模块
├── 客户毛利明细模块
└── 续费客户名单模块
```

### 3.2 时间选择器组件

#### 3.2.1 组件设计
**组件名称**: TimeRangePicker

**布局位置**: 页面顶部，角色切换器下方

**选择类型**:
- **快捷选择**: 今日、本周、本月、本季度、本年度
- **自定义范围**: 日期范围选择器
- **周期选择**: 年度、季度、月度切换

**字段设计**:
```typescript
interface TimeRange {
  type: 'quick' | 'custom' | 'period';
  startDate: string;             // 开始日期 YYYY-MM-DD
  endDate: string;               // 结束日期 YYYY-MM-DD
  period: 'yearly' | 'quarterly' | 'monthly';  // 周期类型
  label: string;                 // 显示标签
}
```

#### 3.2.2 交互设计
- 默认选择当前季度
- 切换时间范围自动刷新所有数据模块
- 支持快捷键操作（左右箭头切换周期）
- 时间选择状态同步到URL参数

### 3.3 核心指标卡片区域

#### 3.3.1 指标卡片设计
**布局**: 4列网格布局，响应式调整

**指标卡片列表**:
1. **总服务费完成**
2. **总新单完成** 
3. **新签客户数**
4. **客户流失率**

#### 3.3.2 指标卡片组件
**组件名称**: MetricCard

**字段设计**:
```typescript
interface MetricCardProps {
  title: string;                 // 指标标题
  value: number;                 // 当前值
  target?: number;               // 目标值
  unit: string;                  // 单位
  trend: 'up' | 'down' | 'stable';  // 趋势
  trendValue: number;            // 趋势数值
  trendPeriod: string;           // 对比周期
  color: string;                 // 主题色
  icon: string;                  // 图标
}
```

**UI设计**:
- 卡片阴影效果，悬停时加深
- 左侧图标区域，右侧数值区域
- 主要数值大字体显示
- 趋势箭头和百分比小字体显示
- 进度条显示完成度（如有目标值）

### 3.4 目标完成情况模块

#### 3.4.1 模块结构
```
目标完成情况模块
├── 模块标题
├── 季度选择器
├── 目标设置区域
│   ├── 服务费目标
│   └── 新单目标
└── 完成情况区域
    ├── 服务费完成
    ├── 单量完成
    └── 完成总比例
```

#### 3.4.2 季度选择器
**组件名称**: QuarterSelector

**字段设计**:
```typescript
interface Quarter {
  year: number;                  // 年份
  quarter: number;               // 季度 1-4
  label: string;                 // 显示标签 "2025年Q1"
  isActive: boolean;             // 是否为当前选中
}
```

**UI设计**:
- 标签页形式展示各季度
- 当前季度高亮显示
- 支持左右滑动查看更多季度

#### 3.4.3 目标与完成对比组件
**组件名称**: TargetComparisonCard

**字段设计**:
```typescript
interface TargetComparison {
  targetType: 'service_fee' | 'new_orders';  // 目标类型
  targetValue: number;           // 目标值
  actualValue: number;           // 实际完成值
  difference: number;            // 差值
  completionRate: number;        // 完成百分比
  unit: string;                  // 单位
}
```

**UI设计**:
- 左侧目标值，右侧完成值
- 中间进度条显示完成度
- 差值用颜色区分（正数绿色，负数红色）
- 完成百分比大字体突出显示

### 3.5 新单服务费及单量完成模块

#### 3.5.1 模块结构
```
新单服务费及单量完成模块
├── 模块标题
├── 季度选择器
├── 新单服务费子模块
│   ├── 总计数值
│   └── 平台分布图表
└── 新单单量子模块
    ├── 总计数值
    └── 平台分布图表
```

#### 3.5.2 平台分布图表
**图表类型**: 饼图 + 柱状图组合

**平台分类**:
- Google
- Meta  
- Criteo
- Bing
- 内容营销及其他

**字段设计**:
```typescript
interface PlatformData {
  platform: string;             // 平台名称
  serviceFee: number;            // 服务费
  orderCount: number;            // 单量
  percentage: number;            // 占比
  color: string;                 // 图表颜色
}
```

**交互设计**:
- 饼图显示占比分布
- 柱状图显示具体数值
- 点击图表项可查看详细数据
- 支持图表类型切换

### 3.6 新签客户毛利完成模块

#### 3.6.1 数据结构设计
```typescript
interface CustomerProfitData {
  quarter: string;               // 季度
  platforms: {
    google: PlatformProfit;
    meta: PlatformProfit;
    criteo: PlatformProfit;
    bing: PlatformProfit;
    total: PlatformProfit;
  };
}

interface PlatformProfit {
  orderCount: number;            // 新单单量
  serviceFee: number;            // 服务费
  consumption: number;           // 消费
  rebate: number;                // 返点
  profit: number;                // 毛利 = 服务费 + 返点
}
```

#### 3.6.2 表格组件设计
**组件名称**: ProfitAnalysisTable

**表格结构**:
- 行：平台（Google、Meta、Criteo、Bing、合计）
- 列：新单单量、服务费、消费、返点
- 支持行列汇总计算

**UI设计**:
- 表格头部固定
- 数值右对齐，货币格式化
- 合计行突出显示
- 支持列排序

### 3.7 所有客户2025年毛利完成模块

#### 3.7.1 模块结构
```
所有客户2025年毛利完成模块
├── 模块标题
├── 季度选择器
├── 毛利汇总卡片区域
│   ├── 总毛利完成
│   ├── 服务费完成
│   └── 返点完成
└── 平台毛利分析表格
    ├── 平台维度统计
    └── 毛利构成分析
```

#### 3.7.2 毛利汇总卡片组件
**组件名称**: ProfitSummaryCard

**字段设计**:
```typescript
interface ProfitSummaryData {
  totalProfit: number;           // 总毛利
  totalServiceFee: number;       // 总服务费
  totalRebate: number;           // 总返点
  totalConsumption: number;      // 总消费
  profitMargin: number;          // 毛利率
  quarterTarget: number;         // 季度目标
  completionRate: number;        // 完成率
  yearOverYearGrowth: number;    // 同比增长率
}
```

**UI设计**:
- 三个并排的汇总卡片
- 毛利金额大字体突出显示
- 完成率用环形进度条展示
- 同比增长用趋势箭头表示

#### 3.7.3 平台毛利分析表格
**组件名称**: PlatformProfitAnalysisTable

**表格字段**:
| 字段名称 | 字段标识 | 数据类型 | 说明 |
|---------|---------|---------|------|
| 平台名称 | platform_name | String | Google/Meta/Criteo/Bing/其他 |
| 客户数量 | customer_count | Integer | 该平台客户总数 |
| 服务费 | service_fee | Decimal(15,2) | 平台服务费总额 |
| 消费 | consumption | Decimal(15,2) | 平台消费总额 |
| 返点 | rebate | Decimal(15,2) | 平台返点总额 |
| 毛利 | profit | Decimal(15,2) | 服务费+返点 |
| 毛利率 | profit_margin | Decimal(5,2) | 毛利/消费*100% |
| 占比 | percentage | Decimal(5,2) | 该平台毛利占总毛利比例 |

**交互功能**:
- 支持按毛利、毛利率排序
- 点击平台名称查看该平台客户详情
- 支持数据导出功能

### 3.8 流失客户分析模块

#### 3.8.1 模块结构
```
流失客户分析模块
├── 模块标题
├── 季度选择器
├── 流失统计卡片区域
│   ├── 总流失客户数
│   ├── 新客户流失数
│   └── 老客户流失数
└── 流失影响分析区域
    ├── 预估损失毛利
    ├── 预估损失服务费
    └── 预估损失返点
```

#### 3.8.2 流失客户分类定义
**流失判定规则**:
- **流失客户**: 连续3个月无消费记录的客户
- **新客户流失**: 2025年新签约且已流失的客户
- **老客户流失**: 2025年前签约且在2025年流失的客户

#### 3.8.3 流失分析卡片
**组件名称**: ChurnAnalysisCard

**字段设计**:
```typescript
interface ChurnData {
  category: 'total' | 'new_customer' | 'old_customer';  // 流失类别
  customerCount: number;         // 客户数
  estimatedProfitLoss: number;   // 预估流失毛利
  estimatedServiceFeeLoss: number; // 预估流失服务费
  estimatedRebateLoss: number;   // 预估流失返点
  quarter: string;               // 季度
  churnRate: number;             // 流失率
  avgCustomerValue: number;      // 平均客户价值
  riskLevel: 'high' | 'medium' | 'low';  // 风险等级
}
```

**UI设计**:
- 三个并排的流失分析卡片
- 客户数用大字体突出显示
- 预估损失用红色警示色
- 流失率用百分比和趋势图表示
- 支持点击查看流失客户详细列表

#### 3.8.4 流失客户详情列表
**组件名称**: ChurnCustomerDetailList

**字段设计**:
```typescript
interface ChurnCustomerDetail {
  customerName: string;          // 客户名称
  salesPerson: string;           // 负责销售
  churnDate: string;             // 流失日期
  lastActiveDate: string;        // 最后活跃日期
  customerType: 'new' | 'old';   // 客户类型
  lastQuarterProfit: number;     // 上季度毛利
  totalHistoryProfit: number;    // 历史总毛利
  churnReason: string;           // 流失原因
  recoveryProbability: number;   // 挽回概率
}
```

### 3.9 销售完成情况模块

#### 3.9.1 模块结构
```
销售完成情况模块
├── 模块标题
├── 时间筛选器（自定义时间筛选）
├── 销售人员列表区域
│   ├── 筛选条件
│   └── 销售人员表格
└── 销售排行榜区域
    ├── 服务费排行
    └── 新单排行
```

#### 3.9.2 销售人员筛选组件
**组件名称**: SalesPersonFilter

**筛选字段**:
```typescript
interface SalesPersonFilter {
  departmentIds: string[];       // 部门筛选
  employeeIds: string[];         // 员工筛选
  completionRateRange: [number, number]; // 完成率范围
  sortBy: 'service_fee' | 'new_orders' | 'completion_rate'; // 排序字段
  sortOrder: 'asc' | 'desc';     // 排序方向
}
```

#### 3.9.3 销售人员表格组件
**组件名称**: SalesPersonTable

**表格字段**:
| 字段名称 | 字段标识 | 数据类型 | 宽度 | 说明 |
|---------|---------|---------|------|------|
| 排名 | rank | Integer | 60px | 按完成率排名 |
| 员工姓名 | employee_name | String | 120px | 支持头像显示 |
| 部门 | department_name | String | 100px | 所属部门 |
| 服务费目标 | service_fee_target | Decimal | 120px | 货币格式 |
| 服务费完成 | service_fee_actual | Decimal | 120px | 货币格式 |
| 服务费差值 | service_fee_gap | Decimal | 120px | 正负数颜色区分 |
| 服务费完成比例 | service_fee_rate | Decimal | 100px | 百分比+进度条 |
| 新单目标 | new_order_target | Integer | 100px | 数量格式 |
| 新单完成 | new_order_actual | Integer | 100px | 数量格式 |
| 新单差值 | new_order_gap | Integer | 100px | 正负数颜色区分 |
| 新单完成比例 | new_order_rate | Decimal | 100px | 百分比+进度条 |
| 完成总比例 | total_completion_rate | Decimal | 120px | 综合完成率 |

**交互功能**:
- 支持多列排序
- 点击员工姓名查看个人详情
- 支持批量操作（导出、发送提醒等）

### 3.10 员工总毛利完成模块

#### 3.10.1 模块结构
```
员工总毛利完成模块
├── 模块标题
├── 时间筛选器（年度、月度、季度筛选）
├── 毛利统计概览
│   ├── 总毛利完成
│   ├── 人均毛利
│   └── 毛利增长率
└── 员工毛利排行榜
    ├── 毛利排行表格
    └── 毛利分布图表
```

#### 3.10.2 毛利统计概览组件
**组件名称**: ProfitStatisticsOverview

**字段设计**:
```typescript
interface ProfitStatistics {
  totalProfit: number;           // 总毛利
  averageProfitPerEmployee: number; // 人均毛利
  profitGrowthRate: number;      // 毛利增长率
  topPerformerProfit: number;    // 最高毛利
  bottomPerformerProfit: number; // 最低毛利
  profitDistribution: {          // 毛利分布
    high: number;                // 高毛利人数（>平均值150%）
    medium: number;              // 中等毛利人数（50%-150%平均值）
    low: number;                 // 低毛利人数（<平均值50%）
  };
}
```

#### 3.10.3 员工毛利排行表格
**组件名称**: EmployeeProfitRankingTable

**表格字段**:
| 字段名称 | 字段标识 | 数据类型 | 宽度 | 说明 |
|---------|---------|---------|------|------|
| 排名 | rank | Integer | 60px | 毛利排名 |
| 员工姓名 | employee_name | String | 120px | 支持头像 |
| 部门 | department_name | String | 100px | 所属部门 |
| 总毛利 | total_profit | Decimal | 120px | 服务费+返点 |
| 服务费 | service_fee | Decimal | 120px | 服务费收入 |
| 返点 | rebate | Decimal | 120px | 返点收入 |
| 客户数 | customer_count | Integer | 80px | 负责客户数 |
| 人均毛利 | profit_per_customer | Decimal | 120px | 毛利/客户数 |
| 毛利占比 | profit_percentage | Decimal | 100px | 占总毛利比例 |
| 同比增长 | year_over_year_growth | Decimal | 100px | 同比增长率 |

**交互功能**:
- 支持按毛利、增长率等排序
- 点击员工查看详细毛利构成
- 支持时间范围对比分析

### 3.11 客户毛利明细模块

#### 3.11.1 模块结构
```
客户毛利明细模块
├── 模块标题
├── 高级筛选器
│   ├── 客户筛选
│   ├── 销售筛选
│   ├── 部门筛选
│   └── 时间筛选
├── 数据统计概览
│   ├── 客户总数
│   ├── 毛利总额
│   └── 平均客户价值
└── 客户明细表格
    ├── 基本信息列
    ├── 合作信息列
    ├── 毛利数据列
    └── 平台消费列
```

#### 3.11.2 高级筛选器组件
**组件名称**: AdvancedCustomerFilter

**筛选字段设计**:
```typescript
interface CustomerFilterCriteria {
  customerNames: string[];       // 客户名称（支持模糊搜索）
  salesPersonIds: string[];      // 销售人员
  departmentIds: string[];       // 优化部门
  cooperationProjects: string[]; // 合作项目
  cooperationYears: number[];    // 合作年份
  customerStatus: ('active' | 'inactive' | 'churned')[]; // 客户状态
  profitRange: [number, number]; // 毛利范围
  serviceFeeRange: [number, number]; // 服务费范围
  cooperationTimeRange: [string, string]; // 合作时间范围
  platforms: string[];          // 平台筛选
}
```

**UI设计**:
- 折叠式筛选面板，默认收起
- 支持筛选条件保存和快速应用
- 实时显示筛选结果数量
- 一键清空所有筛选条件

#### 3.11.3 客户毛利明细表格增强
**组件名称**: EnhancedCustomerProfitTable

**完整字段设计**:
```typescript
interface CustomerProfitDetailEnhanced {
  // 基本信息
  customerId: string;            // 客户ID
  customerName: string;          // 客户名称
  salesPerson: string;           // 销售
  salesPersonId: string;         // 销售ID
  optimizationDept: string;      // 优化部门
  optimizationDeptId: string;    // 优化部门ID

  // 合作信息
  cooperationProject: string;    // 合作项目
  cooperationTime: string;       // 合作时间
  cooperationYear: number;       // 合作年份
  firstContractTime: string;     // 第一次签合同时间
  firstContractPeriod: string;   // 第一次合同合作周期
  currentContractStatus: string; // 当前合同状态

  // 毛利数据
  totalProfit: number;           // 毛利合计
  totalServiceFee: number;       // 服务费合计
  totalRebate: number;           // 返点合计
  totalConsumption: number;      // 消费合计
  profitMargin: number;          // 毛利率

  // 客户状态
  customerStatus: 'active' | 'inactive' | 'churned'; // 客户状态
  lastActiveDate: string;        // 最后活跃日期
  riskLevel: 'high' | 'medium' | 'low'; // 风险等级

  // 平台消费明细
  consumptionDetails: {
    google: number;              // Google消费
    meta: number;                // Meta消费
    criteo: number;              // Criteo消费
    bing: number;                // Bing消费
    others: number;              // 其他平台消费
  };

  // 平台服务费明细
  serviceFeeDetails: {
    google: number;              // Google服务费
    meta: number;                // Meta服务费
    criteo: number;              // Criteo服务费
    bing: number;                // Bing服务费
    others: number;              // 其他平台服务费
  };

  // 平台返点明细
  rebateDetails: {
    google: number;              // Google返点
    meta: number;                // Meta返点
    criteo: number;              // Criteo返点
    bing: number;                // Bing返点
    others: number;              // 其他平台返点
  };
}
```

**表格功能增强**:
- **列配置**: 用户可自定义显示列
- **列分组**: 基本信息、合作信息、毛利数据、平台明细分组
- **冻结列**: 客户名称列冻结，便于横向滚动查看
- **行展开**: 点击行可展开查看平台详细数据
- **批量操作**: 支持批量导出、批量标记等
- **数据钻取**: 点击数据可钻取到更详细的报表

#### 3.11.4 客户详情侧边栏
**组件名称**: CustomerDetailSidebar

**触发方式**: 点击客户名称或详情按钮

**内容结构**:
```
客户详情侧边栏
├── 客户基本信息
├── 合作历史时间线
├── 毛利趋势图表
├── 平台分布图表
├── 风险评估信息
└── 操作按钮区域
```

### 3.12 续费客户名单模块

#### 3.12.1 模块结构
```
续费客户名单模块
├── 模块标题
├── 续费筛选器
│   ├── 到期时间筛选
│   ├── 续费优先级筛选
│   └── 负责人筛选
├── 续费统计概览
│   ├── 即将到期客户数
│   ├── 预估续费金额
│   └── 续费成功率
└── 续费客户列表
    ├── 紧急续费区域
    ├── 重点关注区域
    └── 一般关注区域
```

#### 3.12.2 续费筛选器组件
**组件名称**: RenewalFilter

**筛选字段**:
```typescript
interface RenewalFilterCriteria {
  expiryDateRange: [string, string]; // 到期时间范围
  renewalPriority: ('high' | 'medium' | 'low')[]; // 续费优先级
  salesPersonIds: string[];      // 负责销售
  departmentIds: string[];       // 优化部门
  lastRenewalAmountRange: [number, number]; // 上次续费金额范围
  cooperationYears: number[];    // 合作年限
  renewalStatus: ('pending' | 'contacted' | 'negotiating' | 'confirmed')[]; // 续费状态
}
```

#### 3.12.3 续费统计概览组件
**组件名称**: RenewalStatisticsOverview

**统计数据**:
```typescript
interface RenewalStatistics {
  upcomingExpiry: {
    within7Days: number;         // 7天内到期
    within30Days: number;        // 30天内到期
    within90Days: number;        // 90天内到期
  };
  estimatedRenewalAmount: {
    total: number;               // 预估续费总金额
    confirmed: number;           // 已确认续费金额
    pending: number;             // 待确认续费金额
  };
  renewalSuccessRate: {
    currentQuarter: number;      // 本季度续费成功率
    lastQuarter: number;         // 上季度续费成功率
    yearOverYear: number;        // 同比变化
  };
}
```

#### 3.12.4 续费客户列表增强
**组件名称**: EnhancedRenewalCustomerList

**完整字段设计**:
```typescript
interface RenewalCustomerEnhanced {
  // 基本信息
  customerId: string;            // 客户ID
  customerName: string;          // 客户名称
  salesPerson: string;           // 销售
  salesPersonId: string;         // 销售ID
  optimizationDept: string;      // 优化部门

  // 合作信息
  cooperationProject: string;    // 合作项目
  cooperationTime: string;       // 合作时间
  cooperationYear: number;       // 合作年份
  cooperationDuration: number;   // 合作时长（月）

  // 续费信息
  serviceExpiryTime: string;     // 服务到期时间
  daysToExpiry: number;          // 距离到期天数
  lastRenewalProject: string;    // 上一次续费项目
  lastRenewalAmount: number;     // 上一次续费金额
  lastRenewalDate: string;       // 上一次续费日期

  // 续费状态
  renewalPriority: 'high' | 'medium' | 'low'; // 续费优先级
  renewalStatus: 'pending' | 'contacted' | 'negotiating' | 'confirmed'; // 续费状态
  renewalProbability: number;    // 续费概率
  estimatedRenewalAmount: number; // 预估续费金额

  // 客户价值
  totalHistoryValue: number;     // 历史总价值
  lastQuarterProfit: number;     // 上季度毛利
  averageQuarterlyValue: number; // 平均季度价值
  customerRating: number;        // 客户评级（1-5星）

  // 风险评估
  churnRisk: 'high' | 'medium' | 'low'; // 流失风险
  competitorThreat: boolean;     // 是否有竞争对手威胁
  budgetConcern: boolean;        // 是否有预算担忧

  // 跟进记录
  lastContactDate: string;       // 最后联系日期
  nextFollowUpDate: string;      // 下次跟进日期
  contactFrequency: number;      // 联系频次（天）
  followUpNotes: string;         // 跟进备注
}
```

**列表分区显示**:
1. **紧急续费区域**（7天内到期）
   - 红色警示标识
   - 倒计时显示
   - 一键发送紧急提醒

2. **重点关注区域**（30天内到期，高价值客户）
   - 橙色提醒标识
   - 续费概率显示
   - 快速联系功能

3. **一般关注区域**（90天内到期）
   - 蓝色标识
   - 定期跟进提醒
   - 批量操作支持

#### 3.12.5 续费操作功能
**快速操作按钮**:
- **发送续费提醒**: 一键发送邮件/短信提醒
- **安排会议**: 快速创建续费洽谈会议
- **更新状态**: 快速更新续费进度状态
- **添加备注**: 记录跟进情况和客户反馈
- **设置提醒**: 设置下次跟进提醒时间

**批量操作功能**:
- **批量发送提醒**: 选中多个客户批量发送续费提醒
- **批量导出**: 导出续费客户清单
- **批量分配**: 重新分配负责销售人员
- **批量更新优先级**: 调整续费优先级

## 4. 销售经理看板设计

### 4.1 页面整体布局

```
销售经理看板页面
├── 角色切换区域
├── 团队概览卡片区域
├── 目标完成情况模块（带时间筛选）
├── 新单服务费及单量完成模块（带时间筛选）
├── 新签客户毛利完成模块（带时间筛选）
├── 销售完成情况模块（带时间筛选）
├── 客户毛利明细模块（带时间筛选）
└── 续费客户名单模块（带时间筛选）
```

### 4.2 权限与数据范围

#### 4.2.1 数据权限限制
- **团队数据**: 仅显示所管理团队的销售数据
- **客户信息**: 仅显示团队负责的客户信息
- **对比分析**: 无法查看其他团队的数据对比
- **导出权限**: 仅能导出团队相关数据

#### 4.2.2 功能差异对比
| 功能模块 | 销售总监 | 销售经理 | 主要差异 |
|---------|---------|---------|---------|
| 目标完成情况 | 全公司数据 | 团队数据 | 数据范围限制 |
| 新单服务费完成 | 全平台统计 | 团队平台统计 | 统计范围限制 |
| 新签客户毛利 | 全客户毛利 | 团队客户毛利 | 客户范围限制 |
| 销售完成情况 | 全员排行 | 团队排行 | 排行范围限制 |
| 客户毛利明细 | 全客户明细 | 团队客户明细 | 明细范围限制 |
| 续费客户名单 | 全客户续费 | 团队客户续费 | 续费范围限制 |

### 4.3 团队概览卡片区域

#### 4.3.1 团队核心指标
**组件名称**: TeamOverviewCards

**指标卡片设计**:
1. **团队总服务费完成**
2. **团队总新单完成**
3. **团队客户数**
4. **团队平均完成率**

**字段设计**:
```typescript
interface TeamMetrics {
  teamId: string;                // 团队ID
  teamName: string;              // 团队名称
  memberCount: number;           // 团队成员数
  totalServiceFee: number;       // 团队总服务费
  totalNewOrders: number;        // 团队总新单
  totalCustomers: number;        // 团队客户总数
  averageCompletionRate: number; // 团队平均完成率
  teamRanking: number;           // 团队排名（在所有团队中）
  topPerformer: {               // 团队最佳表现者
    employeeName: string;
    completionRate: number;
  };
  bottomPerformer: {            // 团队待提升者
    employeeName: string;
    completionRate: number;
  };
}
```

### 4.4 时间筛选增强设计

#### 4.4.1 模块级时间筛选器
**组件名称**: ModuleTimeFilter

**筛选器特点**:
- **独立性**: 每个模块拥有独立的时间筛选器
- **记忆性**: 各模块筛选状态独立保存
- **同步性**: 支持一键同步所有模块时间范围

**字段设计**:
```typescript
interface ModuleTimeFilter {
  moduleId: string;              // 模块标识
  filterType: 'quick' | 'custom' | 'period'; // 筛选类型
  quickOptions: {               // 快捷选项
    today: boolean;
    thisWeek: boolean;
    thisMonth: boolean;
    thisQuarter: boolean;
    thisYear: boolean;
  };
  customRange: {                // 自定义范围
    startDate: string;
    endDate: string;
  };
  periodOptions: {              // 周期选项
    yearly: boolean;
    quarterly: boolean;
    monthly: boolean;
  };
  syncWithOthers: boolean;      // 是否与其他模块同步
}
```

#### 4.4.2 时间筛选器UI设计
**布局位置**: 每个模块标题右侧

**UI组件**:
- **快捷按钮组**: 今日、本周、本月、本季度、本年度
- **自定义选择器**: 日期范围选择器
- **周期切换器**: 年度/季度/月度标签页
- **同步按钮**: 一键同步到所有模块

**交互设计**:
- 默认选择本月
- 切换时间自动刷新模块数据
- 支持快捷键操作
- 筛选状态显示在模块标题中

### 4.5 销售完成情况模块（销售经理版）

#### 4.5.1 模块结构
```
销售完成情况模块
├── 模块标题 + 时间筛选器
├── 团队统计概览
│   ├── 团队目标完成率
│   ├── 团队排名
│   └── 成员完成分布
└── 团队成员列表
    ├── 成员筛选器
    └── 成员表格
```

#### 4.5.2 团队统计概览
**组件名称**: TeamSalesOverview

**统计数据**:
```typescript
interface TeamSalesStatistics {
  teamCompletionRate: number;    // 团队整体完成率
  teamRanking: number;           // 团队排名
  totalTeams: number;            // 总团队数
  memberDistribution: {         // 成员完成分布
    excellent: number;           // 优秀（>120%）
    good: number;                // 良好（80%-120%）
    needImprovement: number;     // 待提升（<80%）
  };
  monthlyTrend: {               // 月度趋势
    currentMonth: number;
    lastMonth: number;
    trendDirection: 'up' | 'down' | 'stable';
  };
}
```

#### 4.5.3 团队成员表格增强
**组件名称**: TeamMemberSalesTable

**表格功能增强**:
- **成员对比**: 团队内成员横向对比
- **目标调整**: 支持在线调整成员目标（如有权限）
- **绩效评估**: 快速标记成员绩效等级
- **辅导记录**: 记录对成员的辅导情况

**额外字段**:
```typescript
interface TeamMemberSalesData extends SalesPersonData {
  performanceLevel: 'excellent' | 'good' | 'average' | 'poor'; // 绩效等级
  coachingNotes: string;         // 辅导记录
  lastCoachingDate: string;      // 最后辅导日期
  improvementPlan: string;       // 改进计划
  targetAdjustmentHistory: {     // 目标调整历史
    date: string;
    oldTarget: number;
    newTarget: number;
    reason: string;
  }[];
}
```

### 4.6 客户毛利明细模块（销售经理版）

#### 4.6.1 团队客户筛选增强
**组件名称**: TeamCustomerFilter

**筛选字段增强**:
```typescript
interface TeamCustomerFilter extends CustomerFilterCriteria {
  teamMemberIds: string[];       // 团队成员筛选
  customerAssignment: 'assigned' | 'unassigned' | 'all'; // 客户分配状态
  performanceLevel: ('high' | 'medium' | 'low')[]; // 客户表现等级
  riskLevel: ('high' | 'medium' | 'low')[]; // 风险等级
}
```

#### 4.6.2 团队客户管理功能
**客户分配功能**:
- **重新分配**: 将客户重新分配给团队成员
- **负载均衡**: 自动平衡团队成员客户负载
- **客户转移**: 处理离职员工的客户转移

**团队协作功能**:
- **客户共享**: 标记需要团队协作的重要客户
- **经验分享**: 团队成员间分享客户管理经验
- **集体攻坚**: 针对重点客户组织团队攻坚

### 4.7 续费客户名单模块（销售经理版）

#### 4.7.1 团队续费管理
**组件名称**: TeamRenewalManagement

**团队续费统计**:
```typescript
interface TeamRenewalStatistics {
  teamUpcomingRenewals: number;  // 团队即将到期客户数
  teamRenewalTarget: number;     // 团队续费目标
  teamRenewalProgress: number;   // 团队续费进度
  memberRenewalDistribution: {   // 成员续费分布
    memberId: string;
    memberName: string;
    upcomingCount: number;
    renewalRate: number;
  }[];
}
```

#### 4.7.2 团队续费协作功能
**协作支持**:
- **续费会议**: 组织团队续费策略会议
- **经验分享**: 分享成功续费案例和技巧
- **互助支持**: 团队成员互相支持重点客户续费
- **资源调配**: 合理调配团队资源支持续费工作

## 5. 销售人员看板设计

### 5.1 页面整体布局

```
销售人员看板页面
├── 角色切换区域
├── 个人业绩概览卡片区域
├── 目标完成情况模块（带时间筛选）
├── 新单服务费及单量完成模块（带时间筛选）
├── 新签客户毛利完成模块（带时间筛选）
├── 销售完成情况模块（带时间筛选）
├── 客户毛利明细模块（带时间筛选）
└── 续费客户名单模块（带时间筛选）
```

### 5.2 权限与数据范围

#### 5.2.1 数据权限限制
- **个人数据**: 仅显示个人销售数据和业绩
- **客户信息**: 仅显示个人负责的客户信息
- **对比功能**: 无法查看其他销售人员的详细数据
- **团队数据**: 可查看团队整体数据但无法查看同事个人数据

#### 5.2.2 功能权限对比
| 功能模块 | 销售总监 | 销售经理 | 销售人员 | 主要差异 |
|---------|---------|---------|---------|---------|
| 目标完成情况 | 全公司 | 团队 | 个人 | 数据范围逐级缩小 |
| 新单服务费完成 | 全平台 | 团队平台 | 个人平台 | 统计范围限制 |
| 新签客户毛利 | 全客户 | 团队客户 | 个人客户 | 客户范围限制 |
| 销售完成情况 | 全员排行 | 团队排行 | 个人表现 | 无排行对比 |
| 客户毛利明细 | 全客户 | 团队客户 | 个人客户 | 明细范围限制 |
| 续费客户名单 | 全客户 | 团队客户 | 个人客户 | 续费范围限制 |

### 5.3 个人业绩概览卡片区域

#### 5.3.1 个人核心指标卡片
**组件名称**: PersonalMetricsCards

**指标卡片设计**:
1. **个人服务费完成**
2. **个人新单完成**
3. **负责客户数**
4. **个人排名**（在团队中的排名）

**字段设计**:
```typescript
interface PersonalMetrics {
  employeeId: string;            // 员工ID
  employeeName: string;          // 员工姓名
  personalServiceFee: number;    // 个人服务费
  personalNewOrders: number;     // 个人新单数
  personalCustomers: number;     // 负责客户数
  teamRanking: number;           // 团队排名
  totalTeamMembers: number;      // 团队总人数
  completionRate: number;        // 个人完成率
  lastMonthComparison: {         // 与上月对比
    serviceFeeGrowth: number;
    newOrdersGrowth: number;
    rankingChange: number;
  };
  quarterlyTarget: {             // 季度目标
    serviceFeeTarget: number;
    newOrderTarget: number;
    currentProgress: number;
  };
}
```

#### 5.3.2 个人目标进度仪表盘
**组件名称**: PersonalTargetDashboard

**UI设计**:
- **环形进度图**: 显示目标完成度
- **目标对比**: 目标值与完成值对比
- **剩余时间**: 距离目标期限倒计时
- **达成预测**: 基于当前进度预测最终完成情况

**字段设计**:
```typescript
interface PersonalTargetProgress {
  targetPeriod: string;          // 目标周期
  serviceFeeProgress: {
    target: number;
    actual: number;
    completionRate: number;
    dailyAverage: number;        // 日均完成
    requiredDailyAverage: number; // 需要的日均完成
    prediction: number;          // 预测最终完成
  };
  newOrderProgress: {
    target: number;
    actual: number;
    completionRate: number;
    dailyAverage: number;
    requiredDailyAverage: number;
    prediction: number;
  };
  daysRemaining: number;         // 剩余天数
  achievementProbability: number; // 达成概率
}
```

### 5.4 目标完成情况模块（销售人员版）

#### 5.4.1 模块结构
```
目标完成情况模块
├── 模块标题 + 时间筛选器
├── 个人目标概览
│   ├── 服务费目标进度
│   ├── 新单目标进度
│   └── 综合完成率
└── 目标达成分析
    ├── 进度趋势图
    ├── 关键里程碑
    └── 改进建议
```

#### 5.4.2 个人目标概览
**组件名称**: PersonalTargetOverview

**目标进度卡片**:
- **服务费目标**: 显示目标、完成、差值、完成率
- **新单目标**: 显示目标、完成、差值、完成率
- **综合评分**: 基于两项指标的综合评分

#### 5.4.3 目标达成分析
**组件名称**: TargetAchievementAnalysis

**分析内容**:
- **进度趋势**: 日/周/月进度趋势图表
- **关键里程碑**: 重要节点完成情况
- **改进建议**: 基于数据分析的个性化建议

### 5.5 新单服务费及单量完成模块（销售人员版）

#### 5.5.1 个人平台分布
**组件名称**: PersonalPlatformDistribution

**平台数据展示**:
```typescript
interface PersonalPlatformData {
  platform: string;             // 平台名称
  serviceFee: number;            // 个人在该平台的服务费
  orderCount: number;            // 个人在该平台的单量
  customerCount: number;         // 个人在该平台的客户数
  averageOrderValue: number;     // 平均单价
  platformGrowth: number;        // 平台增长率
  platformRanking: number;       // 在该平台的团队排名
}
```

#### 5.5.2 平台表现分析
**分析维度**:
- **优势平台**: 表现最好的平台
- **潜力平台**: 有增长潜力的平台
- **改进平台**: 需要重点改进的平台

### 5.6 新签客户毛利完成模块（销售人员版）

#### 5.6.1 个人客户毛利统计
**组件名称**: PersonalCustomerProfitStats

**统计数据**:
```typescript
interface PersonalCustomerProfitStats {
  totalProfit: number;           // 个人总毛利
  newCustomerProfit: number;     // 新签客户毛利
  existingCustomerProfit: number; // 老客户毛利
  averageProfitPerCustomer: number; // 平均客户毛利
  profitGrowthRate: number;      // 毛利增长率
  topCustomerProfit: number;     // 最高客户毛利
  profitDistribution: {          // 毛利分布
    high: number;                // 高毛利客户数
    medium: number;              // 中等毛利客户数
    low: number;                 // 低毛利客户数
  };
}
```

### 5.7 销售完成情况模块（销售人员版）

#### 5.7.1 个人表现分析
**组件名称**: PersonalPerformanceAnalysis

**表现维度**:
- **完成率分析**: 各项指标完成情况
- **团队排名**: 在团队中的排名位置
- **历史对比**: 与历史同期对比
- **改进空间**: 识别改进机会

#### 5.7.2 个人发展建议
**组件名称**: PersonalDevelopmentSuggestions

**建议内容**:
- **技能提升**: 基于数据分析的技能提升建议
- **客户管理**: 客户管理优化建议
- **时间管理**: 工作效率提升建议
- **学习资源**: 推荐相关学习资源

### 5.8 客户毛利明细模块（销售人员版）

#### 5.8.1 个人客户管理
**组件名称**: PersonalCustomerManagement

**客户分类管理**:
- **重点客户**: 高价值客户重点关注
- **成长客户**: 有潜力的客户培养
- **维护客户**: 稳定合作的客户维护
- **风险客户**: 有流失风险的客户挽回

#### 5.8.2 客户关系管理
**CRM功能集成**:
- **客户档案**: 完整的客户信息档案
- **沟通记录**: 客户沟通历史记录
- **任务提醒**: 客户跟进任务提醒
- **机会管理**: 销售机会跟踪管理

### 5.9 续费客户名单模块（销售人员版）

#### 5.9.1 个人续费管理
**组件名称**: PersonalRenewalManagement

**续费客户分类**:
- **即将到期**: 需要立即跟进的客户
- **续费洽谈**: 正在洽谈续费的客户
- **续费确认**: 已确认续费的客户
- **流失风险**: 有流失风险的客户

#### 5.9.2 续费工作台
**组件名称**: RenewalWorkbench

**工作台功能**:
- **今日任务**: 今日需要跟进的续费任务
- **本周计划**: 本周续费工作计划
- **续费提醒**: 自动续费提醒设置
- **成功案例**: 个人续费成功案例记录

**字段设计**:
```typescript
interface PersonalRenewalWorkbench {
  todayTasks: {
    customerId: string;
    customerName: string;
    taskType: 'call' | 'email' | 'meeting' | 'proposal';
    priority: 'high' | 'medium' | 'low';
    deadline: string;
  }[];
  weeklyPlan: {
    date: string;
    plannedActivities: string[];
    expectedOutcomes: string[];
  }[];
  renewalReminders: {
    customerId: string;
    reminderType: 'email' | 'sms' | 'call';
    reminderDate: string;
    isActive: boolean;
  }[];
  successCases: {
    customerName: string;
    renewalAmount: number;
    renewalDate: string;
    successFactors: string[];
  }[];
}
```

## 6. 项目总监看板设计

### 6.1 页面整体布局

```
项目总监看板页面
├── 角色切换区域
├── 时间选择器区域
├── 总运营目标完成模块
├── 项目组完成情况模块
├── 新老客户分析及流失客户分析模块（总计）
├── 新老客户分析及流失客户分析模块（部门）
├── 平台新增及流失模块（总计）
├── 平台新增及流失模块（部门）
├── 平台毛利贡献分析模块（总计）
├── 平台毛利贡献分析模块（部门）
├── 客户质量评估模块（总计）
├── 客户质量评估模块（部门）
├── 客户贡献模块（总计）
└── 续费客户名单模块
```

### 6.2 总运营目标完成模块

#### 6.2.1 模块结构
```
总运营目标完成模块
├── 模块标题
├── 时间选择器
│   ├── 自定义时间筛选
│   └── 年度、月度、季度筛选
└── 季度列表区域
    ├── 目标设置区域
    │   ├── 合计毛利目标
    │   ├── 服务费目标
    │   └── 返点目标
    └── 实际完成区域
        ├── 合计毛利完成
        ├── 服务费完成
        └── 返点完成
```

#### 6.2.2 目标完成对比组件
**组件名称**: OperationTargetCompletion

**字段设计**:
```typescript
interface OperationTargetData {
  quarter: string;               // 季度标识 YYYY-Q1
  targets: {
    totalProfitTarget: number;   // 合计毛利目标
    serviceFeeTarget: number;    // 服务费目标
    rebateTarget: number;        // 返点目标
  };
  achievements: {
    totalProfitActual: number;   // 合计毛利完成
    totalProfitGap: number;      // 毛利差额
    totalProfitRate: number;     // 毛利完成百分比

    serviceFeeActual: number;    // 服务费完成
    serviceFeeGap: number;       // 服务费差额
    serviceFeeRate: number;      // 服务费完成百分比

    rebateActual: number;        // 返点完成
    rebateGap: number;           // 返点差额
    rebateRate: number;          // 返点完成百分比
  };
}
```

**UI设计**:
- 季度标签页切换显示不同季度数据
- 目标与完成值并排对比显示
- 差额用颜色区分（正数绿色，负数红色）
- 完成百分比用进度条可视化
- 支持季度间数据对比

### 6.3 项目组完成情况模块

#### 6.3.1 模块结构
```
项目组完成情况模块
├── 模块标题
├── 时间选择器
│   ├── 自定义时间筛选
│   └── 年度、月度、季度筛选
└── 部门列表区域
    ├── 目标设置区域
    │   ├── 各部门目标
    │   └── 目标占比饼图
    └── 实际完成区域
        ├── 各部门完成情况
        └── 完成占比饼图
```

#### 6.3.2 部门目标完成组件
**组件名称**: DepartmentTargetCompletion

**字段设计**:
```typescript
interface DepartmentTargetData {
  departmentId: string;          // 部门ID
  departmentName: string;        // 部门名称
  targets: {
    totalProfitTarget: number;   // 合计毛利目标
    serviceFeeTarget: number;    // 服务费目标
    rebateTarget: number;        // 返点目标
    targetPercentage: number;    // 目标占比
  };
  achievements: {
    totalProfitActual: number;   // 合计毛利完成
    totalProfitGap: number;      // 毛利差额
    totalProfitRate: number;     // 毛利完成百分比

    serviceFeeActual: number;    // 服务费完成
    serviceFeeGap: number;       // 服务费差额
    serviceFeeRate: number;      // 服务费完成百分比

    rebateActual: number;        // 返点完成
    rebateGap: number;           // 返点差额
    rebateRate: number;          // 返点完成百分比

    completionPercentage: number; // 完成占比
  };
}
```

#### 6.3.3 目标占比饼图组件
**组件名称**: TargetDistributionChart

**图表功能**:
- **目标占比饼图**: 显示各部门目标分配比例
- **完成占比饼图**: 显示各部门实际完成比例
- **对比模式**: 支持目标与完成的对比显示
- **交互功能**: 点击饼图扇区查看部门详情

### 6.4 新老客户分析及流失客户分析模块（总计）

#### 6.4.1 模块结构
```
新老客户分析模块（总计）
├── 模块标题
├── 时间选择器
│   ├── 自定义时间筛选
│   └── 年度、月度、季度筛选
├── 季度列表区域
│   ├── 所有客户数据
│   ├── 2025前客户数据（老客户）
│   ├── 2025年新签客户数据（新客户）
│   └── 2025年流失客户数据
└── 占比分析图表区域
    ├── 客户数占比饼图
    ├── 总毛利占比饼图
    ├── 服务费占比饼图
    └── 返点占比饼图
```

#### 6.4.2 客户分析数据组件
**组件名称**: CustomerAnalysisData

**字段设计**:
```typescript
interface CustomerAnalysisData {
  quarter: string;               // 季度标识
  allCustomers: {
    activeCustomerCount: number; // 活跃客户数（以客户名称为定量）
    totalProfit: number;         // 总毛利
    serviceFee: number;          // 服务费
    rebate: number;              // 返点
  };
  oldCustomers: {               // 2025前客户（老客户）
    activeCustomerCount: number; // 活跃客户数
    totalProfit: number;         // 总毛利
    serviceFee: number;          // 服务费
    rebate: number;              // 返点
  };
  newCustomers: {               // 2025年新签客户（新客户）
    activeCustomerCount: number; // 活跃客户数
    totalProfit: number;         // 总毛利
    serviceFee: number;          // 服务费
    rebate: number;              // 返点
  };
  churnedCustomers: {           // 2025年流失客户
    customerCount: number;       // 客户数
    estimatedProfitLoss: number; // 预估流失毛利
    estimatedServiceFeeLoss: number; // 预估流失服务费
    estimatedRebateLoss: number; // 预估流失返点
  };
}
```

#### 6.4.3 客户占比分析图表
**组件名称**: CustomerProportionCharts

**图表类型**:
- **客户数占比饼图**: 老客户、新客户、流失客户的数量占比
- **总毛利占比饼图**: 各类客户的毛利贡献占比
- **服务费占比饼图**: 各类客户的服务费占比
- **返点占比饼图**: 各类客户的返点占比

**交互功能**:
- 支持图表类型切换
- 点击图例筛选显示数据
- 悬停显示详细数值和百分比
- 支持数据导出

### 6.5 新老客户分析及流失客户分析模块（部门）

#### 6.5.1 模块结构
```
新老客户分析模块（部门）
├── 模块标题
├── 时间选择器
│   ├── 自定义时间筛选
│   └── 年度、月度、季度筛选
└── 部门列表区域
    ├── 部门客户数据
    │   ├── 所有客户数据
    │   ├── 老客户数据
    │   ├── 新客户数据
    │   └── 流失客户数据
    └── 部门占比图表
        ├── 客户数占比饼图
        ├── 总毛利占比饼图
        ├── 服务费占比饼图
        └── 返点占比饼图
```

#### 6.5.2 部门客户分析组件
**组件名称**: DepartmentCustomerAnalysis

**字段设计**:
```typescript
interface DepartmentCustomerAnalysis {
  departmentId: string;          // 部门ID
  departmentName: string;        // 部门名称
  customerData: CustomerAnalysisData; // 客户分析数据（复用上面的结构）
  departmentRanking: {           // 部门排名
    profitRanking: number;       // 毛利排名
    customerCountRanking: number; // 客户数排名
    growthRanking: number;       // 增长率排名
  };
}
```

**UI设计**:
- 部门列表表格显示各部门数据
- 支持按毛利、客户数、增长率排序
- 点击部门名称查看详细分析
- 部门对比功能，支持多部门数据对比

### 6.6 平台新增及流失模块（总计）

#### 6.6.1 模块结构
```
平台新增及流失模块（总计）
├── 模块标题
├── 数据统计概览
│   ├── 项目数
│   ├── 项目对应返点
│   ├── 项目对应服务费用
│   └── 总毛利
└── 季度列表区域
    ├── 所有平台项目数
    ├── 2025年新签客户数（新客户）
    └── 2025年流失客户数
```

#### 6.6.2 平台项目统计组件
**组件名称**: PlatformProjectStatistics

**字段设计**:
```typescript
interface PlatformProjectData {
  quarter: string;               // 季度标识
  overview: {
    totalProjects: number;       // 项目数
    totalRebate: number;         // 项目对应返点
    totalServiceFee: number;     // 项目对应服务费用
    totalProfit: number;         // 总毛利
  };
  platformData: {
    allPlatformProjects: PlatformProjectDetail; // 所有平台项目数
    newCustomerProjects: PlatformProjectDetail; // 2025年新签客户数（新客户）
    churnedCustomerProjects: PlatformProjectDetail; // 2025年流失客户数
  };
}

interface PlatformProjectDetail {
  google: number;                // Google平台数据
  meta: number;                  // Meta平台数据
  criteo: number;                // Criteo平台数据
  bing: number;                  // Bing平台数据
  total: number;                 // 总计
}
```

#### 6.6.3 平台对比分析图表
**组件名称**: PlatformComparisonChart

**图表功能**:
- **柱状图对比**: 各平台项目数量对比
- **趋势图**: 新增和流失客户趋势
- **占比分析**: 各平台在总项目中的占比
- **增长分析**: 平台项目增长率分析

### 6.7 平台新增及流失模块（部门）

#### 6.7.1 模块结构
```
平台新增及流失模块（部门）
├── 模块标题
├── 数据统计概览
│   ├── 项目数
│   ├── 项目对应返点
│   ├── 项目对应服务费用
│   └── 总毛利
└── 部门列表区域
    ├── 所有平台项目数
    ├── 2025年新签客户数（新客户）
    └── 2025年流失客户数
```

#### 6.7.2 部门平台项目组件
**组件名称**: DepartmentPlatformProjects

**字段设计**:
```typescript
interface DepartmentPlatformData {
  departmentId: string;          // 部门ID
  departmentName: string;        // 部门名称
  platformProjectData: PlatformProjectData; // 平台项目数据（复用上面的结构）
  departmentPerformance: {       // 部门表现
    projectGrowthRate: number;   // 项目增长率
    profitGrowthRate: number;    // 毛利增长率
    churnRate: number;           // 流失率
    newCustomerRate: number;     // 新客户获取率
  };
}
```

### 6.8 平台毛利贡献分析模块（总计）

#### 6.8.1 模块结构
```
平台毛利贡献分析模块（总计）
├── 模块标题
└── 季度列表区域
    ├── 所有客户汇总
    │   ├── 项目数
    │   ├── 总毛利
    │   ├── 服务费
    │   ├── 返点
    │   └── 各平台占比饼图
    ├── Google平台数据
    ├── Meta平台数据
    ├── Criteo平台数据
    └── Bing平台数据
```

#### 6.8.2 平台毛利贡献组件
**组件名称**: PlatformProfitContribution

**字段设计**:
```typescript
interface PlatformProfitContributionData {
  quarter: string;               // 季度标识
  allCustomers: {
    projectCount: number;        // 项目数
    totalProfit: number;         // 总毛利
    serviceFee: number;          // 服务费
    rebate: number;              // 返点
  };
  platformDetails: {
    google: PlatformProfitDetail;
    meta: PlatformProfitDetail;
    criteo: PlatformProfitDetail;
    bing: PlatformProfitDetail;
  };
  platformDistribution: {       // 各平台占比
    customerCountDistribution: PlatformDistribution;
    profitDistribution: PlatformDistribution;
    serviceFeeDistribution: PlatformDistribution;
    rebateDistribution: PlatformDistribution;
  };
}

interface PlatformProfitDetail {
  projectCount: number;          // 项目数
  totalProfit: number;           // 总毛利
  serviceFee: number;            // 服务费
  rebate: number;                // 返点
  profitMargin: number;          // 毛利率
  growthRate: number;            // 增长率
}

interface PlatformDistribution {
  google: number;                // Google占比
  meta: number;                  // Meta占比
  criteo: number;                // Criteo占比
  bing: number;                  // Bing占比
}
```

#### 6.8.3 平台占比分析图表
**组件名称**: PlatformProportionAnalysis

**图表类型**:
- **客户数占比饼图**: 各平台客户数量占比
- **总毛利占比饼图**: 各平台毛利贡献占比
- **服务费占比饼图**: 各平台服务费占比
- **返点占比饼图**: 各平台返点占比

**交互功能**:
- 支持多图表联动显示
- 点击平台查看详细数据
- 支持时间范围对比
- 数据钻取到具体客户

### 6.9 平台毛利贡献分析模块（部门）

#### 6.9.1 模块结构
```
平台毛利贡献分析模块（部门）
├── 模块标题
└── 部门列表区域
    ├── 部门汇总数据
    │   ├── 项目数
    │   ├── 总毛利
    │   ├── 服务费
    │   ├── 返点
    │   └── 各平台占比饼图
    ├── Google平台数据
    ├── Meta平台数据
    ├── Criteo平台数据
    └── Bing平台数据
```

#### 6.9.2 部门平台毛利组件
**组件名称**: DepartmentPlatformProfitContribution

**字段设计**:
```typescript
interface DepartmentPlatformProfitData {
  departmentId: string;          // 部门ID
  departmentName: string;        // 部门名称
  profitContributionData: PlatformProfitContributionData; // 平台毛利贡献数据
  departmentRanking: {           // 部门排名
    totalProfitRanking: number;  // 总毛利排名
    googleProfitRanking: number; // Google毛利排名
    metaProfitRanking: number;   // Meta毛利排名
    criteoProfitRanking: number; // Criteo毛利排名
    bingProfitRanking: number;   // Bing毛利排名
  };
}
```

### 6.10 客户质量评估模块（总计）

#### 6.10.1 模块结构
```
客户质量评估模块（总计）
├── 模块标题
└── 季度列表区域
    ├── 月消费10万美金以上客户
    ├── 月消费5-10万美金客户
    ├── 月消费3-5万美金客户
    ├── 月消费1.5-3万美金客户
    └── 月消费1.5万以下美金客户
```

#### 6.10.2 客户质量评估组件
**组件名称**: CustomerQualityAssessment

**字段设计**:
```typescript
interface CustomerQualityData {
  quarter: string;               // 季度标识
  customerSegments: {
    highValue: CustomerSegmentData;     // 月消费10万美金以上客户
    mediumHighValue: CustomerSegmentData; // 月消费5-10万美金客户
    mediumValue: CustomerSegmentData;   // 月消费3-5万美金客户
    lowMediumValue: CustomerSegmentData; // 月消费1.5-3万美金客户
    lowValue: CustomerSegmentData;      // 月消费1.5万以下美金客户
  };
}

interface CustomerSegmentData {
  segmentName: string;           // 客户分段名称
  consumptionRange: string;      // 消费范围
  customerCount: number;         // 客户数
  salesAmount: number;           // 销售额
  totalConsumption: number;      // 总消费（所有平台）
  roi: number;                   // ROI
  segmentPercentage: number;     // 各类型客户占比
  averageCustomerValue: number;  // 平均客户价值
  retentionRate: number;         // 客户留存率
}
```

#### 6.10.3 客户分段占比图表
**组件名称**: CustomerSegmentProportionChart

**图表功能**:
- **客户数量占比饼图**: 各消费段客户数量分布
- **销售额占比饼图**: 各消费段销售额贡献
- **ROI对比柱状图**: 各消费段ROI表现
- **价值分布热力图**: 客户价值分布可视化

### 6.11 客户质量评估模块（部门）

#### 6.11.1 模块结构
```
客户质量评估模块（部门）
├── 模块标题
└── 部门列表区域
    ├── 部门客户分段数据
    │   ├── 月消费10万美金以上客户
    │   ├── 月消费5-10万美金客户
    │   ├── 月消费3-5万美金客户
    │   ├── 月消费1.5-3万美金客户
    │   └── 月消费1.5万以下美金客户
    └── 部门客户质量对比
```

#### 6.11.2 部门客户质量组件
**组件名称**: DepartmentCustomerQuality

**字段设计**:
```typescript
interface DepartmentCustomerQualityData {
  departmentId: string;          // 部门ID
  departmentName: string;        // 部门名称
  customerQualityData: CustomerQualityData; // 客户质量数据
  departmentMetrics: {           // 部门指标
    averageCustomerValue: number; // 平均客户价值
    highValueCustomerRatio: number; // 高价值客户占比
    customerUpgradeRate: number;  // 客户升级率
    departmentROI: number;        // 部门整体ROI
  };
}
```

### 6.12 客户贡献模块（总计）

#### 6.12.1 模块结构
```
客户贡献模块（总计）
├── 模块标题
├── 时间选择器
│   ├── 年度、月度、季度筛选
│   └── 自定义时间筛选
└── 客户列表区域
    ├── 客户基本信息
    ├── 财务数据
    └── 分平台数据
```

#### 6.12.2 客户贡献列表组件
**组件名称**: CustomerContributionList

**字段设计**:
```typescript
interface CustomerContributionData {
  customerId: string;            // 客户ID
  customerName: string;          // 客户名称
  salesAmount: number;           // 销售额
  totalProfit: number;           // 总毛利
  totalServiceFee: number;       // 总服务费
  totalConsumption: number;      // 总消费
  totalRebate: number;           // 总返点

  // 分平台服务费
  platformServiceFee: {
    google: number;              // Google服务费
    meta: number;                // Meta服务费
    criteo: number;              // Criteo服务费
    bing: number;                // Bing服务费
  };

  // 分平台消费
  platformConsumption: {
    google: number;              // Google消费
    meta: number;                // Meta消费
    criteo: number;              // Criteo消费
    bing: number;                // Bing消费
  };

  // 分平台返点
  platformRebate: {
    google: number;              // Google返点
    meta: number;                // Meta返点
    criteo: number;              // Criteo返点
    bing: number;                // Bing返点
  };

  // 客户排名和指标
  profitRanking: number;         // 毛利排名
  consumptionRanking: number;    // 消费排名
  customerValue: number;         // 客户价值评分
  cooperationDuration: number;   // 合作时长（月）
}
```

#### 6.12.3 客户贡献表格组件
**组件名称**: CustomerContributionTable

**表格功能**:
- **多级表头**: 基本信息、财务数据、分平台数据分组
- **动态列**: 支持显示/隐藏平台列
- **排序功能**: 支持按毛利、消费、服务费等排序
- **筛选功能**: 支持按客户价值、合作时长等筛选
- **数据导出**: 支持导出客户贡献报表

### 6.13 续费客户名单模块

#### 6.13.1 模块结构
```
续费客户名单模块
├── 模块标题
├── 时间选择器
│   ├── 自定义时间筛选
│   └── 年度、月度、季度筛选
└── 续费客户列表
    ├── 客户基本信息
    ├── 合作信息
    └── 续费信息
```

#### 6.13.2 续费客户信息组件
**组件名称**: RenewalCustomerInfo

**字段设计**:
```typescript
interface RenewalCustomerData {
  customerId: string;            // 客户ID
  customerName: string;          // 客户名称
  salesPerson: string;           // 销售
  optimizationDept: string;      // 优化部门
  cooperationProject: string;    // 合作项目
  cooperationTime: string;       // 合作时间
  cooperationYear: number;       // 合作年份
  lastCooperationPeriod: string; // 上一次合作周期
  serviceExpiryTime: string;     // 服务到期时间
  lastRenewalProject: string;    // 上一次续费项目
  lastRenewalAmount: number;     // 上一次续费金额

  // 续费分析
  daysToExpiry: number;          // 距离到期天数
  renewalProbability: number;    // 续费概率
  estimatedRenewalAmount: number; // 预估续费金额
  renewalPriority: 'high' | 'medium' | 'low'; // 续费优先级
  renewalStatus: 'pending' | 'contacted' | 'negotiating' | 'confirmed'; // 续费状态

  // 客户价值
  historicalValue: number;       // 历史总价值
  averageQuarterlyValue: number; // 平均季度价值
  profitContribution: number;    // 毛利贡献
}
```

#### 6.13.3 续费管理功能
**续费提醒功能**:
- **自动提醒**: 基于到期时间自动生成提醒
- **手动提醒**: 支持手动发送续费提醒
- **提醒记录**: 记录所有提醒历史
- **跟进状态**: 跟踪续费进展状态

**续费分析功能**:
- **续费概率预测**: 基于历史数据预测续费概率
- **价值评估**: 评估客户续费价值
- **风险识别**: 识别续费风险因素
- **策略建议**: 提供续费策略建议

## 8. 项目经理看板设计

### 8.1 页面整体布局

```
项目经理看板页面
├── 角色切换区域
├── 部门概览卡片区域
├── 总运营目标完成模块（部门版）
├── 新老客户分析及流失客户分析模块（部门版）
├── 平台新增及流失模块（部门版）
├── 平台毛利贡献分析模块（部门版）
├── 客户质量评估模块（部门版）
├── 客户贡献模块（部门版）
└── 续费客户名单模块（部门版）
```

### 8.2 权限与数据范围

#### 8.2.1 数据权限限制
- **部门数据**: 仅显示所管理部门的运营数据
- **客户信息**: 仅显示部门负责的客户信息
- **对比分析**: 可查看部门在公司中的排名和对比
- **导出权限**: 仅能导出部门相关数据

#### 8.2.2 功能差异对比
| 功能模块 | 项目总监 | 项目经理 | 主要差异 |
|---------|---------|---------|---------|
| 总运营目标完成 | 全公司+部门 | 仅部门 | 数据范围限制 |
| 客户分析 | 总计+部门 | 仅部门 | 无总计数据 |
| 平台分析 | 总计+部门 | 仅部门 | 无总计数据 |
| 客户质量评估 | 总计+部门 | 仅部门 | 无总计数据 |
| 客户贡献 | 全客户 | 部门客户 | 客户范围限制 |
| 续费管理 | 全客户 | 部门客户 | 续费范围限制 |

### 8.3 部门概览卡片区域

#### 8.3.1 部门核心指标
**组件名称**: DepartmentOverviewCards

**指标卡片设计**:
1. **部门总毛利完成**
2. **部门客户数**
3. **部门项目数**
4. **部门排名**（在所有部门中的排名）

**字段设计**:
```typescript
interface DepartmentMetrics {
  departmentId: string;          // 部门ID
  departmentName: string;        // 部门名称
  totalProfit: number;           // 部门总毛利
  customerCount: number;         // 部门客户数
  projectCount: number;          // 部门项目数
  departmentRanking: number;     // 部门排名
  totalDepartments: number;      // 总部门数
  profitGrowthRate: number;      // 毛利增长率
  customerGrowthRate: number;    // 客户增长率
  targetCompletionRate: number;  // 目标完成率
}
```

### 8.4 模块功能适配

项目经理看板的各个模块功能与项目总监看板基本相同，主要差异在于：

1. **数据范围限制**: 所有模块仅显示当前部门的数据
2. **对比功能**: 可查看部门在公司中的排名和表现
3. **权限控制**: 无法查看其他部门的详细数据
4. **功能简化**: 移除总计类型的分析模块

## 9. Google优化师看板设计

### 9.1 页面整体布局

```
Google优化师看板页面
├── 角色切换区域
├── 个人业绩概览卡片区域
├── 运营目标模块
├── 新老客户分析及流失客户分析模块
├── 客户质量评估模块
├── 账户余额模块
├── 数据总览模块
├── 客户Google广告数据总览模块
└── 客户Bing广告数据总览模块
```

### 9.2 权限与数据范围

#### 9.2.1 数据权限限制
- **客户范围**: 仅显示个人负责的Google平台客户
- **平台数据**: 主要关注Google平台，辅助查看其他平台数据
- **广告数据**: 可查看详细的Google广告投放数据
- **账户管理**: 可管理客户的Google广告账户

#### 9.2.2 功能权限对比
| 功能模块 | 项目总监 | 项目经理 | Google优化师 | 主要差异 |
|---------|---------|---------|-------------|---------|
| 运营目标 | 全公司+部门 | 部门 | 个人 | 数据范围逐级缩小 |
| 客户分析 | 总计+部门 | 部门 | 个人客户 | 客户范围限制 |
| 客户质量评估 | 总计+部门 | 部门 | 个人客户 | 评估范围限制 |
| 账户余额 | 无 | 无 | 有 | 优化师专有功能 |
| 数据总览 | 无 | 无 | 有 | 优化师专有功能 |
| 广告数据总览 | 无 | 无 | 有 | 优化师专有功能 |

### 9.3 个人业绩概览卡片区域

#### 9.3.1 个人核心指标
**组件名称**: OptimizerMetricsCards

**指标卡片设计**:
1. **负责客户数**
2. **个人毛利完成**
3. **Google平台ROI**
4. **账户余额预警数**

**字段设计**:
```typescript
interface OptimizerMetrics {
  optimizerId: string;           // 优化师ID
  optimizerName: string;         // 优化师姓名
  platform: 'google' | 'meta' | 'criteo' | 'bing'; // 主要平台
  customerCount: number;         // 负责客户数
  totalProfit: number;           // 个人毛利完成
  platformROI: number;           // 主平台ROI
  lowBalanceAccounts: number;    // 余额预警账户数
  monthlyGrowth: {               // 月度增长
    profitGrowth: number;
    roiGrowth: number;
    customerGrowth: number;
  };
  targetCompletion: number;      // 目标完成率
}
```

### 9.4 运营目标模块

#### 9.4.1 模块结构
```
运营目标模块
├── 模块标题
└── 季度列表区域
    ├── 目标设置
    │   ├── 合计毛利目标
    │   ├── 服务费目标
    │   └── 返点目标
    └── 实际完成
        ├── 合计毛利完成（完成数值、差额、完成进度）
        ├── 服务费完成（完成数值、差额、完成进度）
        └── 返点完成（完成数值、差额、完成进度）
```

#### 9.4.2 个人目标完成组件
**组件名称**: OptimizerTargetCompletion

**字段设计**:
```typescript
interface OptimizerTargetData {
  quarter: string;               // 季度标识
  optimizerId: string;           // 优化师ID
  targets: {
    totalProfitTarget: number;   // 合计毛利目标
    serviceFeeTarget: number;    // 服务费目标
    rebateTarget: number;        // 返点目标
  };
  achievements: {
    totalProfitActual: number;   // 合计毛利完成
    totalProfitGap: number;      // 毛利差额
    totalProfitProgress: number; // 毛利完成进度

    serviceFeeActual: number;    // 服务费完成
    serviceFeeGap: number;       // 服务费差额
    serviceFeeProgress: number;  // 服务费完成进度

    rebateActual: number;        // 返点完成
    rebateGap: number;           // 返点差额
    rebateProgress: number;      // 返点完成进度
  };
  teamRanking: number;           // 在团队中的排名
}
```

**UI设计**:
- 季度标签页切换
- 目标与完成值对比显示
- 进度条可视化完成情况
- 差额用颜色区分（绿色/红色）
- 显示在团队中的排名

### 9.5 新老客户分析及流失客户分析模块

#### 9.5.1 模块结构
```
新老客户分析模块
├── 模块标题
└── 季度列表区域
    ├── 所有项目数（以客户名称为定量）
    │   ├── 活跃客户数
    │   ├── 总毛利
    │   ├── 服务费
    │   └── 返点
    ├── 2025前项目数（老客户）
    │   ├── 活跃客户数
    │   ├── 总毛利
    │   ├── 服务费
    │   └── 返点
    ├── 2025年新签项目数（新客户）
    │   ├── 活跃客户数
    │   ├── 总毛利
    │   ├── 服务费
    │   └── 返点
    └── 2025年流失客户
        ├── 流失客户数
        ├── 预估流失毛利
        ├── 预估流失服务费
        └── 预估流失返点
```

#### 9.5.2 个人客户分析组件
**组件名称**: OptimizerCustomerAnalysis

**字段设计**:
```typescript
interface OptimizerCustomerAnalysisData {
  quarter: string;               // 季度标识
  optimizerId: string;           // 优化师ID
  allProjects: {
    activeCustomerCount: number; // 活跃客户数
    totalProfit: number;         // 总毛利
    serviceFee: number;          // 服务费
    rebate: number;              // 返点
  };
  oldCustomers: {               // 2025前项目（老客户）
    activeCustomerCount: number;
    totalProfit: number;
    serviceFee: number;
    rebate: number;
  };
  newCustomers: {               // 2025年新签项目（新客户）
    activeCustomerCount: number;
    totalProfit: number;
    serviceFee: number;
    rebate: number;
  };
  churnedCustomers: {           // 2025年流失客户
    customerCount: number;
    estimatedProfitLoss: number;
    estimatedServiceFeeLoss: number;
    estimatedRebateLoss: number;
  };
}
```

### 9.6 客户质量评估模块

#### 9.6.1 模块结构
```
客户质量评估模块
├── 模块标题
└── 季度列表区域
    ├── 月消费10万美金以上客户（所有平台）
    ├── 月消费5-10万美金客户（所有平台）
    ├── 月消费3-5万美金客户（所有平台）
    ├── 月消费1.5-3万美金客户（所有平台）
    └── 月消费1.5万以下美金客户（所有平台）
```

#### 9.6.2 个人客户质量评估组件
**组件名称**: OptimizerCustomerQualityAssessment

**字段设计**:
```typescript
interface OptimizerCustomerQualityData {
  quarter: string;               // 季度标识
  optimizerId: string;           // 优化师ID
  customerSegments: {
    highValue: OptimizerCustomerSegment;     // 月消费10万美金以上
    mediumHighValue: OptimizerCustomerSegment; // 月消费5-10万美金
    mediumValue: OptimizerCustomerSegment;   // 月消费3-5万美金
    lowMediumValue: OptimizerCustomerSegment; // 月消费1.5-3万美金
    lowValue: OptimizerCustomerSegment;      // 月消费1.5万以下
  };
}

interface OptimizerCustomerSegment {
  segmentName: string;           // 客户分段名称
  customerCount: number;         // 客户数
  salesAmount: number;           // 销售额
  totalConsumption: number;      // 总消费（所有平台）
  roi: number;                   // ROI
  segmentPercentage: number;     // 各类型客户占比
  platformBreakdown: {          // 平台消费分布
    google: number;
    meta: number;
    criteo: number;
    bing: number;
  };
}
```

#### 9.6.3 客户质量占比图表
**组件名称**: OptimizerCustomerQualityChart

**图表功能**:
- **各类型客户占比饼图**: 显示不同消费段客户的占比
- **ROI对比柱状图**: 各消费段的ROI表现
- **平台分布图**: 各消费段在不同平台的分布
- **趋势分析**: 客户质量变化趋势

### 9.7 账户余额模块

#### 9.7.1 模块结构
```
账户余额模块
├── 模块标题
├── 余额预警统计
│   ├── 预警账户数
│   ├── 总余额
│   └── 平均剩余天数
└── 客户列表
    ├── 客户名称
    ├── 广告账户
    ├── 账户余额
    ├── 过去7天平均花费
    └── 预计使用天数
```

#### 9.7.2 账户余额管理组件
**组件名称**: AccountBalanceManagement

**字段设计**:
```typescript
interface AccountBalanceData {
  optimizerId: string;           // 优化师ID
  summary: {
    totalAccounts: number;       // 总账户数
    warningAccounts: number;     // 预警账户数
    totalBalance: number;        // 总余额
    averageRemainingDays: number; // 平均剩余天数
  };
  customerAccounts: CustomerAccountBalance[];
}

interface CustomerAccountBalance {
  customerId: string;            // 客户ID
  customerName: string;          // 客户名称
  adAccount: string;             // 广告账户
  accountBalance: number;        // 账户余额
  past7DaysAvgSpend: number;     // 过去7天平均花费
  estimatedDays: number;         // 预计使用天数
  warningLevel: 'critical' | 'warning' | 'normal'; // 预警级别
  lastUpdated: string;           // 最后更新时间
}
```

#### 9.7.3 余额预警功能
**预警规则**:
- **严重预警**: 预计使用天数 ≤ 3天
- **一般预警**: 预计使用天数 ≤ 7天
- **正常状态**: 预计使用天数 > 7天

**预警操作**:
- **自动提醒**: 系统自动发送余额预警通知
- **手动充值提醒**: 一键发送充值提醒给客户
- **余额监控**: 实时监控账户余额变化
- **历史记录**: 查看余额变化历史

### 9.8 数据总览模块

#### 9.8.1 模块结构
```
数据总览模块
├── 模块标题
├── 时间筛选
│   ├── 快捷筛选（今日、昨日、上周、本周、上月等）
│   └── 自定义时间筛选
└── 客户列表
    ├── 客户基本信息
    ├── 合作信息
    ├── 业绩数据
    └── 平台数据
```

#### 9.8.2 客户数据总览组件
**组件名称**: CustomerDataOverview

**字段设计**:
```typescript
interface CustomerOverviewData {
  customerId: string;            // 客户ID
  customerName: string;          // 客户名称
  cooperationForm: string;       // 合作形式
  teamCooperation: string;       // 团队合作情况
  collaborationTeam: string;     // 协作团队
  customerGrade: 'A' | 'B' | 'C'; // 客户分级

  // 业绩数据
  salesAmount: number;           // 销售额
  totalPlatformSpend: number;    // 各平台总花费
  overallROI: number;            // 整站ROI
  averageOrderValue: number;     // 客单价
  orderCount: number;            // 订单数
  orderConversionRate: number;   // 订单转化率

  // 平台数据
  platformData: {
    meta: PlatformPerformance;
    google: PlatformPerformance;
    criteo: PlatformPerformance;
    bing: PlatformPerformance;
  };
}

interface PlatformPerformance {
  spend: number;                 // 花费
  orderValue: number;            // 订单价值
  roi: number;                   // ROI
}
```

#### 9.8.3 客户分级管理
**分级标准**:
- **A类客户**: 月消费 > 5万美金，ROI > 3.0
- **B类客户**: 月消费 1-5万美金，ROI > 2.0
- **C类客户**: 月消费 < 1万美金，ROI > 1.5

**分级功能**:
- **自动分级**: 基于消费和ROI自动分级
- **手动调整**: 优化师可手动调整客户分级
- **分级历史**: 记录客户分级变化历史
- **分级提醒**: 客户分级变化时自动提醒

### 9.9 客户Google广告数据总览模块

#### 9.9.1 模块结构
```
客户Google广告数据总览模块
├── 模块标题
├── 数据统计概览
│   ├── 总花费
│   ├── 总转化价值
│   ├── 平均ROAS
│   └── 异常账户数
└── 客户列表
    ├── 基本信息
    ├── 投放数据
    ├── 转化数据
    └── 异常提醒
```

#### 9.9.2 Google广告数据组件
**组件名称**: GoogleAdsDataOverview

**字段设计**:
```typescript
interface GoogleAdsCustomerData {
  customerId: string;            // 客户ID
  customerName: string;          // 客户名称
  optimizer: string;             // 优化师

  // 投放数据
  spend: number;                 // 花费
  impressions: number;           // 展示次数
  clicks: number;                // 点击次数
  ctr: number;                   // 点击率 (CTR)
  cpc: number;                   // CPC

  // 转化数据
  conversionValue: number;       // 转化价值
  conversionValueByTime: number; // 转化价值（按转化时间）
  roas: number;                  // ROAS
  roasByTime: number;            // ROAS（按转化时间）
  conversions: number;           // 转化次数
  conversionRate: number;        // 转化率
  cpa: number;                   // CPA

  // 账户状态
  estimatedDaysRemaining: number; // 预计还能花费天数
  anomalyAlerts: AnomalyAlert[]; // 异常数据提醒
}

interface AnomalyAlert {
  type: 'cpc' | 'spend' | 'conversion'; // 异常类型
  severity: 'high' | 'medium' | 'low'; // 严重程度
  message: string;               // 异常描述
  threshold: number;             // 阈值
  currentValue: number;          // 当前值
  detectedAt: string;            // 检测时间
}
```

#### 9.9.3 异常数据监控
**异常检测规则**:
- **CPC异常**: CPC超过历史平均值50%
- **花费异常**: 日花费超过预算120%
- **转化异常**: 转化率低于历史平均值30%

**异常处理流程**:
1. 系统自动检测异常数据
2. 生成异常提醒并标记严重程度
3. 发送通知给优化师
4. 优化师确认并处理异常
5. 记录处理结果和改进措施

### 9.10 客户Bing广告数据总览模块

#### 9.10.1 模块结构
```
客户Bing广告数据总览模块
├── 模块标题
├── 数据统计概览
│   ├── 总花费
│   ├── 总转化价值
│   ├── 平均ROAS
│   └── 异常账户数
└── 客户列表
    ├── 基本信息
    ├── 投放数据
    ├── 转化数据
    └── 异常提醒
```

#### 9.10.2 Bing广告数据组件
**组件名称**: BingAdsDataOverview

**字段设计**:
```typescript
interface BingAdsCustomerData {
  customerId: string;            // 客户ID
  customerName: string;          // 客户名称
  optimizer: string;             // 优化师

  // 投放数据
  spend: number;                 // 花费
  impressions: number;           // 展示次数
  clicks: number;                // 点击次数
  ctr: number;                   // 点击率 (CTR)
  cpc: number;                   // CPC

  // 转化数据
  conversionValue: number;       // 转化价值
  conversionValueByTime: number; // 转化价值（按转化时间）
  roas: number;                  // ROAS
  roasByTime: number;            // ROAS（按转化时间）
  conversions: number;           // 转化次数
  conversionRate: number;        // 转化率
  cpa: number;                   // CPA

  // 账户状态
  estimatedDaysRemaining: number; // 预计还能花费天数
  anomalyAlerts: AnomalyAlert[]; // 异常数据提醒（复用上面的结构）
}
```

**注意**: Google优化师看板中包含Bing广告数据是为了提供跨平台的数据对比和分析，帮助优化师了解客户在不同平台的表现。

## 11. Meta优化师看板设计

### 11.1 页面整体布局

```
Meta优化师看板页面
├── 角色切换区域
├── 个人业绩概览卡片区域
├── 运营目标模块
├── 新老客户分析及流失客户分析模块
├── 客户质量评估模块
├── 账户余额模块
├── 数据总览模块
├── 客户FB广告数据总览模块
└── 客户Bing广告数据总览模块
```

### 11.2 Meta优化师特殊功能

#### 11.2.1 客户FB广告数据总览模块
**组件名称**: FacebookAdsDataOverview

**字段设计**:
```typescript
interface FacebookAdsCustomerData {
  customerId: string;            // 客户ID
  customerName: string;          // 客户名称
  optimizer: string;             // 优化师

  // 投放数据
  spend: number;                 // 花费
  impressions: number;           // 展示次数
  clicks: number;                // 点击次数
  ctr: number;                   // 点击率 (CTR)
  cpc: number;                   // CPC

  // 转化数据
  conversionValue: number;       // 转化价值
  conversionValueByTime: number; // 转化价值（按转化时间）
  roas: number;                  // ROAS
  roasByTime: number;            // ROAS（按转化时间）
  conversions: number;           // 转化次数
  conversionRate: number;        // 转化率
  cpa: number;                   // CPA

  // 账户状态
  estimatedDaysRemaining: number; // 预计还能花费天数
  anomalyAlerts: AnomalyAlert[]; // 异常数据提醒
}
```

**Meta平台特殊指标**:
- **频次控制**: 广告频次监控和优化建议
- **受众质量**: 受众重叠度和质量评估
- **创意表现**: 创意素材表现分析
- **像素追踪**: 像素事件追踪状态

### 11.3 功能差异说明
Meta优化师看板与Google优化师看板结构基本相同，主要差异：
1. **主平台数据**: 重点关注Meta/Facebook平台数据
2. **广告数据模块**: 客户FB广告数据总览替代Google广告数据
3. **平台特色功能**: 增加Meta平台特有的监控指标
4. **其他功能**: 运营目标、客户分析、质量评估等模块保持一致

## 12. Criteo优化师看板设计

### 12.1 页面整体布局

```
Criteo优化师看板页面
├── 角色切换区域
├── 个人业绩概览卡片区域
├── 账户余额模块
├── 数据总览模块
└── 客户Criteo广告数据总览模块
```

### 12.2 功能模块简化说明

#### 12.2.1 模块差异对比
| 功能模块 | Google优化师 | Meta优化师 | Criteo优化师 | 说明 |
|---------|-------------|-----------|-------------|------|
| 运营目标 | ✅ | ✅ | ❌ | Criteo优化师无此模块 |
| 新老客户分析 | ✅ | ✅ | ❌ | Criteo优化师无此模块 |
| 客户质量评估 | ✅ | ✅ | ❌ | Criteo优化师无此模块 |
| 账户余额 | ✅ | ✅ | ✅ | 所有优化师都有 |
| 数据总览 | ✅ | ✅ | ✅ | 所有优化师都有 |
| 平台广告数据 | ✅ | ✅ | ✅ | 主平台数据总览 |

#### 12.2.2 权限与数据范围
- **客户范围**: 仅显示个人负责的Criteo平台客户
- **平台数据**: 主要关注Criteo平台数据
- **功能简化**: 相比Google和Meta优化师，功能模块较少

### 12.3 客户Criteo广告数据总览模块

#### 12.3.1 模块结构
```
客户Criteo广告数据总览模块
├── 模块标题
├── 数据统计概览
│   ├── 总花费
│   ├── 总转化价值
│   ├── 平均ROAS
│   └── 异常账户数
└── 客户列表
    ├── 基本信息
    ├── 投放数据
    ├── 转化数据
    └── 异常提醒
```

#### 12.3.2 Criteo广告数据组件
**组件名称**: CriteoAdsDataOverview

**字段设计**:
```typescript
interface CriteoAdsCustomerData {
  customerId: string;            // 客户ID
  customerName: string;          // 客户名称
  optimizer: string;             // 优化师

  // 投放数据
  spend: number;                 // 花费
  impressions: number;           // 展示次数
  clicks: number;                // 点击次数
  ctr: number;                   // 点击率 (CTR)
  cpc: number;                   // CPC

  // 转化数据
  conversionValue: number;       // 转化价值
  conversionValueByTime: number; // 转化价值（按转化时间）
  roas: number;                  // ROAS
  roasByTime: number;            // ROAS（按转化时间）
  conversions: number;           // 转化次数
  conversionRate: number;        // 转化率
  cpa: number;                   // CPA

  // 账户状态
  estimatedDaysRemaining: number; // 预计还能花费天数
  anomalyAlerts: AnomalyAlert[]; // 异常数据提醒
}
```

**Criteo平台特殊指标**:
- **产品推荐**: 产品推荐算法表现
- **重定向效果**: 重定向广告效果分析
- **目录质量**: 产品目录质量评估
- **受众细分**: 受众细分效果分析

## 13. Bing优化师看板设计

### 13.1 页面整体布局

```
Bing优化师看板页面
├── 角色切换区域
├── 个人业绩概览卡片区域
├── 账户余额模块
├── 数据总览模块
└── 客户Bing广告数据总览模块
```

### 13.2 功能模块说明

#### 13.2.1 模块配置
Bing优化师看板与Criteo优化师看板结构完全相同：
- **账户余额模块**: 监控客户Bing广告账户余额
- **数据总览模块**: 客户整体数据概览
- **Bing广告数据总览**: 详细的Bing平台广告数据

#### 13.2.2 客户Bing广告数据总览模块
**组件名称**: BingAdsDataOverviewForOptimizer

**字段设计**: 与前面定义的BingAdsCustomerData结构相同

**Bing平台特殊指标**:
- **搜索份额**: 搜索市场份额分析
- **质量得分**: 关键词质量得分监控
- **竞争分析**: 竞争对手分析
- **设备表现**: 不同设备的广告表现

### 13.3 优化师看板通用功能

#### 13.3.1 跨平台数据对比
所有优化师看板都支持查看其他平台的基础数据，用于：
- **效果对比**: 对比不同平台的投放效果
- **预算分配**: 协助客户进行跨平台预算分配
- **策略调整**: 基于全平台数据调整优化策略

#### 13.3.2 客户协作功能
- **客户沟通**: 记录与客户的沟通历史
- **优化建议**: 生成和发送优化建议报告
- **问题反馈**: 收集和处理客户反馈
- **定期汇报**: 定期生成客户汇报材料

#### 13.3.3 工作效率工具
- **任务管理**: 管理日常优化任务
- **提醒设置**: 设置各种工作提醒
- **快捷操作**: 常用操作的快捷入口
- **数据导出**: 快速导出客户数据报告

## 14. 优化师看板业务逻辑

### 14.1 客户分配逻辑

#### 14.1.1 客户归属规则
- **主平台归属**: 客户主要归属于消费最多的平台优化师
- **协作管理**: 多平台客户可由多个优化师协作管理
- **权限控制**: 优化师只能查看和管理分配给自己的客户
- **数据共享**: 协作客户的基础数据在相关优化师间共享

#### 14.1.2 客户转移流程
1. **转移申请**: 优化师或管理员发起客户转移申请
2. **审批流程**: 项目经理或项目总监审批
3. **数据交接**: 完成客户数据和历史记录交接
4. **权限更新**: 更新客户访问权限
5. **通知相关方**: 通知客户和相关团队成员

### 14.2 数据更新机制

#### 14.2.1 实时数据更新
- **广告数据**: 每小时同步一次广告平台数据
- **账户余额**: 每30分钟更新一次账户余额
- **异常监控**: 实时监控异常数据并立即提醒
- **转化数据**: 根据平台API限制进行更新

#### 14.2.2 数据准确性保证
- **多源验证**: 对比多个数据源确保准确性
- **异常检测**: 自动检测和标记异常数据
- **手动校验**: 支持优化师手动校验和修正数据
- **历史追踪**: 记录所有数据变更历史

### 14.3 异常处理机制

#### 14.3.1 异常类型定义
- **数据异常**: CPC、花费、转化率等指标异常
- **账户异常**: 账户余额不足、账户被暂停等
- **系统异常**: API连接失败、数据同步失败等
- **业务异常**: 客户投诉、合作问题等

#### 14.3.2 异常处理流程
1. **异常检测**: 系统自动检测或手动发现异常
2. **分级处理**: 根据异常严重程度分级处理
3. **通知机制**: 及时通知相关人员
4. **处理跟踪**: 跟踪异常处理进度
5. **结果反馈**: 记录处理结果和改进措施

## 15. 财务总监看板设计

### 15.1 页面整体布局

```
财务总监看板页面
├── 角色切换区域
├── 财务核心指标卡片区域
├── 收入分析模块
├── 成本分析模块
├── 利润分析模块
├── 现金流分析模块
├── 财务比率分析模块
├── 预算执行分析模块
├── 应收账款分析模块
├── 财务风险预警模块
└── 财务报表模块
```

### 15.2 权限与数据范围

#### 15.2.1 数据权限范围
- **全公司财务数据**: 查看所有部门和业务线的财务数据
- **收入数据**: 服务费收入、返点收入、其他收入的详细分析
- **成本数据**: 人力成本、运营成本、平台成本等全面成本分析
- **利润数据**: 毛利、净利润、各维度利润分析
- **现金流数据**: 经营性现金流、投资性现金流、筹资性现金流

### 15.3 财务核心指标卡片区域

#### 15.3.1 核心财务指标
**组件名称**: FinanceMetricsCards

**指标卡片设计**:
1. **总收入**
2. **总成本**
3. **净利润**
4. **毛利率**
5. **现金流**
6. **应收账款**

**字段设计**:
```typescript
interface FinanceMetrics {
  period: string;                // 统计周期
  totalRevenue: number;          // 总收入
  totalCost: number;             // 总成本
  netProfit: number;             // 净利润
  grossProfitMargin: number;     // 毛利率
  cashFlow: number;              // 现金流
  accountsReceivable: number;    // 应收账款

  // 同比数据
  revenueGrowth: number;         // 收入增长率
  costGrowth: number;            // 成本增长率
  profitGrowth: number;          // 利润增长率

  // 预警指标
  cashFlowRisk: 'high' | 'medium' | 'low'; // 现金流风险
  receivableRisk: 'high' | 'medium' | 'low'; // 应收风险
}
```

### 15.4 收入分析模块

#### 15.4.1 模块结构
```
收入分析模块
├── 模块标题
├── 时间选择器
│   ├── 年度、季度、月度筛选
│   └── 自定义时间筛选
├── 收入构成分析
│   ├── 服务费收入
│   ├── 返点收入
│   ├── 其他收入
│   └── 收入占比饼图
├── 收入趋势分析
│   ├── 月度收入趋势图
│   ├── 同比增长分析
│   └── 环比增长分析
└── 部门收入贡献
    ├── 销售部门收入
    ├── 运营部门收入
    └── 部门收入排行
```

#### 15.4.2 收入分析组件
**组件名称**: RevenueAnalysis

**字段设计**:
```typescript
interface RevenueAnalysisData {
  period: string;                // 分析周期
  revenueComposition: {
    serviceFeeRevenue: number;   // 服务费收入
    rebateRevenue: number;       // 返点收入
    otherRevenue: number;        // 其他收入
    totalRevenue: number;        // 总收入
  };
  revenueTrend: RevenueTrendData[]; // 收入趋势
  departmentRevenue: DepartmentRevenueData[]; // 部门收入
  revenueGrowth: {
    monthOverMonth: number;      // 环比增长
    yearOverYear: number;        // 同比增长
    quarterOverQuarter: number;  // 季度环比增长
  };
}

interface RevenueTrendData {
  date: string;                  // 日期
  serviceFeeRevenue: number;     // 服务费收入
  rebateRevenue: number;         // 返点收入
  otherRevenue: number;          // 其他收入
  totalRevenue: number;          // 总收入
}

interface DepartmentRevenueData {
  departmentId: string;          // 部门ID
  departmentName: string;        // 部门名称
  revenue: number;               // 部门收入
  revenuePercentage: number;     // 收入占比
  growth: number;                // 增长率
  ranking: number;               // 排名
}
```

#### 15.4.3 收入分析图表
**图表类型**:
- **收入构成饼图**: 服务费、返点、其他收入的占比
- **收入趋势线图**: 月度收入变化趋势
- **部门收入柱状图**: 各部门收入对比
- **增长率对比图**: 同比、环比增长率对比

### 15.5 成本分析模块

#### 15.5.1 模块结构
```
成本分析模块
├── 模块标题
├── 时间选择器
├── 成本构成分析
│   ├── 人力成本
│   ├── 运营成本
│   ├── 平台成本
│   ├── 管理费用
│   └── 成本占比饼图
├── 成本趋势分析
│   ├── 月度成本趋势图
│   ├── 成本增长分析
│   └── 成本控制效果
└── 部门成本分析
    ├── 各部门成本分布
    ├── 成本效率分析
    └── 成本优化建议
```

#### 15.5.2 成本分析组件
**组件名称**: CostAnalysis

**字段设计**:
```typescript
interface CostAnalysisData {
  period: string;                // 分析周期
  costComposition: {
    laborCost: number;           // 人力成本
    operatingCost: number;       // 运营成本
    platformCost: number;        // 平台成本
    managementCost: number;      // 管理费用
    totalCost: number;           // 总成本
  };
  costTrend: CostTrendData[];    // 成本趋势
  departmentCost: DepartmentCostData[]; // 部门成本
  costEfficiency: {
    costPerRevenue: number;      // 成本收入比
    costPerEmployee: number;     // 人均成本
    costGrowthRate: number;      // 成本增长率
  };
}

interface CostTrendData {
  date: string;                  // 日期
  laborCost: number;             // 人力成本
  operatingCost: number;         // 运营成本
  platformCost: number;          // 平台成本
  managementCost: number;        // 管理费用
  totalCost: number;             // 总成本
}

interface DepartmentCostData {
  departmentId: string;          // 部门ID
  departmentName: string;        // 部门名称
  cost: number;                  // 部门成本
  costPercentage: number;        // 成本占比
  costEfficiency: number;        // 成本效率
  budgetVariance: number;        // 预算差异
}
```

### 15.6 利润分析模块

#### 15.6.1 模块结构
```
利润分析模块
├── 模块标题
├── 时间选择器
├── 利润构成分析
│   ├── 毛利润
│   ├── 营业利润
│   ├── 净利润
│   └── 利润率趋势
├── 利润来源分析
│   ├── 部门利润贡献
│   ├── 客户利润贡献
│   ├── 平台利润贡献
│   └── 利润集中度分析
└── 盈利能力分析
    ├── 毛利率分析
    ├── 净利率分析
    ├── ROE分析
    └── ROA分析
```

#### 15.6.2 利润分析组件
**组件名称**: ProfitAnalysis

**字段设计**:
```typescript
interface ProfitAnalysisData {
  period: string;                // 分析周期
  profitComposition: {
    grossProfit: number;         // 毛利润
    operatingProfit: number;     // 营业利润
    netProfit: number;           // 净利润
    grossProfitMargin: number;   // 毛利率
    operatingProfitMargin: number; // 营业利润率
    netProfitMargin: number;     // 净利率
  };
  profitSources: {
    departmentProfit: DepartmentProfitData[]; // 部门利润
    customerProfit: CustomerProfitData[];     // 客户利润
    platformProfit: PlatformProfitData[];     // 平台利润
  };
  profitability: {
    roe: number;                 // 净资产收益率
    roa: number;                 // 总资产收益率
    roic: number;                // 投入资本回报率
  };
}

interface DepartmentProfitData {
  departmentId: string;          // 部门ID
  departmentName: string;        // 部门名称
  profit: number;                // 部门利润
  profitMargin: number;          // 利润率
  profitContribution: number;    // 利润贡献度
}

interface CustomerProfitData {
  customerId: string;            // 客户ID
  customerName: string;          // 客户名称
  profit: number;                // 客户利润
  profitMargin: number;          // 利润率
  profitRanking: number;         // 利润排名
}

interface PlatformProfitData {
  platform: string;             // 平台名称
  profit: number;                // 平台利润
  profitMargin: number;          // 利润率
  profitGrowth: number;          // 利润增长率
}
```

### 15.7 现金流分析模块

#### 15.7.1 模块结构
```
现金流分析模块
├── 模块标题
├── 时间选择器
├── 现金流构成分析
│   ├── 经营性现金流
│   ├── 投资性现金流
│   ├── 筹资性现金流
│   └── 净现金流
├── 现金流趋势分析
│   ├── 月度现金流趋势
│   ├── 现金流预测
│   └── 现金流健康度
└── 现金流管理
    ├── 现金余额监控
    ├── 资金周转分析
    └── 流动性风险评估
```

#### 15.7.2 现金流分析组件
**组件名称**: CashFlowAnalysis

**字段设计**:
```typescript
interface CashFlowAnalysisData {
  period: string;                // 分析周期
  cashFlowComposition: {
    operatingCashFlow: number;   // 经营性现金流
    investingCashFlow: number;   // 投资性现金流
    financingCashFlow: number;   // 筹资性现金流
    netCashFlow: number;         // 净现金流
  };
  cashFlowTrend: CashFlowTrendData[]; // 现金流趋势
  cashFlowHealth: {
    cashRatio: number;           // 现金比率
    quickRatio: number;          // 速动比率
    currentRatio: number;        // 流动比率
    cashCycle: number;           // 现金周转周期
  };
  liquidityRisk: 'high' | 'medium' | 'low'; // 流动性风险
}

interface CashFlowTrendData {
  date: string;                  // 日期
  operatingCashFlow: number;     // 经营性现金流
  investingCashFlow: number;     // 投资性现金流
  financingCashFlow: number;     // 筹资性现金流
  netCashFlow: number;           // 净现金流
  cashBalance: number;           // 现金余额
}
```

### 15.8 财务比率分析模块

#### 15.8.1 模块结构
```
财务比率分析模块
├── 模块标题
├── 时间选择器
├── 盈利能力比率
│   ├── 毛利率
│   ├── 净利率
│   ├── ROE
│   └── ROA
├── 偿债能力比率
│   ├── 流动比率
│   ├── 速动比率
│   ├── 资产负债率
│   └── 利息保障倍数
├── 运营能力比率
│   ├── 应收账款周转率
│   ├── 存货周转率
│   ├── 总资产周转率
│   └── 营运资金周转率
└── 比率趋势分析
    ├── 历史趋势对比
    ├── 行业对比
    └── 预警指标
```

#### 15.8.2 财务比率组件
**组件名称**: FinancialRatioAnalysis

**字段设计**:
```typescript
interface FinancialRatioData {
  period: string;                // 分析周期
  profitabilityRatios: {
    grossProfitMargin: number;   // 毛利率
    netProfitMargin: number;     // 净利率
    roe: number;                 // 净资产收益率
    roa: number;                 // 总资产收益率
  };
  solvencyRatios: {
    currentRatio: number;        // 流动比率
    quickRatio: number;          // 速动比率
    debtToAssetRatio: number;    // 资产负债率
    interestCoverageRatio: number; // 利息保障倍数
  };
  operatingRatios: {
    receivableTurnover: number;  // 应收账款周转率
    inventoryTurnover: number;   // 存货周转率
    assetTurnover: number;       // 总资产周转率
    workingCapitalTurnover: number; // 营运资金周转率
  };
  ratioTrends: FinancialRatioTrendData[]; // 比率趋势
  industryBenchmark: IndustryBenchmarkData; // 行业基准
}

interface FinancialRatioTrendData {
  date: string;                  // 日期
  grossProfitMargin: number;     // 毛利率
  netProfitMargin: number;       // 净利率
  currentRatio: number;          // 流动比率
  debtToAssetRatio: number;      // 资产负债率
}

interface IndustryBenchmarkData {
  industryAverage: {
    grossProfitMargin: number;   // 行业平均毛利率
    netProfitMargin: number;     // 行业平均净利率
    currentRatio: number;        // 行业平均流动比率
    debtToAssetRatio: number;    // 行业平均资产负债率
  };
  companyPosition: 'above' | 'average' | 'below'; // 公司在行业中的位置
}
```

### 15.9 预算执行分析模块

#### 15.9.1 模块结构
```
预算执行分析模块
├── 模块标题
├── 时间选择器
├── 预算执行概览
│   ├── 收入预算执行
│   ├── 成本预算执行
│   ├── 利润预算执行
│   └── 预算完成率
├── 预算差异分析
│   ├── 收入差异分析
│   ├── 成本差异分析
│   ├── 差异原因分析
│   └── 改进建议
└── 部门预算执行
    ├── 各部门预算完成情况
    ├── 预算执行排名
    └── 预算调整建议
```

#### 15.9.2 预算执行组件
**组件名称**: BudgetExecutionAnalysis

**字段设计**:
```typescript
interface BudgetExecutionData {
  period: string;                // 分析周期
  budgetOverview: {
    revenueBudget: number;       // 收入预算
    revenueActual: number;       // 实际收入
    revenueVariance: number;     // 收入差异
    revenueVarianceRate: number; // 收入差异率

    costBudget: number;          // 成本预算
    costActual: number;          // 实际成本
    costVariance: number;        // 成本差异
    costVarianceRate: number;    // 成本差异率

    profitBudget: number;        // 利润预算
    profitActual: number;        // 实际利润
    profitVariance: number;      // 利润差异
    profitVarianceRate: number;  // 利润差异率
  };
  varianceAnalysis: VarianceAnalysisData[]; // 差异分析
  departmentBudget: DepartmentBudgetData[]; // 部门预算
}

interface VarianceAnalysisData {
  category: string;              // 差异类别
  budgetAmount: number;          // 预算金额
  actualAmount: number;          // 实际金额
  variance: number;              // 差异金额
  varianceRate: number;          // 差异率
  reason: string;                // 差异原因
  impact: 'positive' | 'negative'; // 影响性质
}

interface DepartmentBudgetData {
  departmentId: string;          // 部门ID
  departmentName: string;        // 部门名称
  budgetAmount: number;          // 预算金额
  actualAmount: number;          // 实际金额
  executionRate: number;         // 执行率
  ranking: number;               // 执行排名
}
```

### 15.10 应收账款分析模块

#### 15.10.1 模块结构
```
应收账款分析模块
├── 模块标题
├── 时间选择器
├── 应收账款概览
│   ├── 应收账款总额
│   ├── 逾期应收账款
│   ├── 坏账准备
│   └── 回收率
├── 账龄分析
│   ├── 30天以内
│   ├── 31-60天
│   ├── 61-90天
│   ├── 91-180天
│   └── 180天以上
├── 客户应收分析
│   ├── 主要欠款客户
│   ├── 逾期客户列表
│   ├── 风险客户识别
│   └── 催收建议
└── 应收趋势分析
    ├── 应收账款趋势
    ├── 回收率趋势
    └── 风险预警
```

#### 15.10.2 应收账款组件
**组件名称**: AccountsReceivableAnalysis

**字段设计**:
```typescript
interface AccountsReceivableData {
  period: string;                // 分析周期
  receivableOverview: {
    totalReceivable: number;     // 应收账款总额
    overdueReceivable: number;   // 逾期应收账款
    badDebtProvision: number;    // 坏账准备
    collectionRate: number;      // 回收率
  };
  agingAnalysis: AgingAnalysisData[]; // 账龄分析
  customerReceivable: CustomerReceivableData[]; // 客户应收
  receivableTrend: ReceivableTrendData[]; // 应收趋势
}

interface AgingAnalysisData {
  agingPeriod: string;           // 账龄期间
  amount: number;                // 金额
  percentage: number;            // 占比
  riskLevel: 'low' | 'medium' | 'high'; // 风险等级
}

interface CustomerReceivableData {
  customerId: string;            // 客户ID
  customerName: string;          // 客户名称
  receivableAmount: number;      // 应收金额
  overdueAmount: number;         // 逾期金额
  overdueDays: number;           // 逾期天数
  riskLevel: 'low' | 'medium' | 'high'; // 风险等级
  collectionAction: string;      // 催收行动
}

interface ReceivableTrendData {
  date: string;                  // 日期
  totalReceivable: number;       // 应收账款总额
  overdueReceivable: number;     // 逾期应收账款
  collectionRate: number;        // 回收率
}
```

### 15.11 财务风险预警模块

#### 15.11.1 模块结构
```
财务风险预警模块
├── 模块标题
├── 风险等级概览
│   ├── 整体风险等级
│   ├── 风险指标数量
│   └── 风险趋势
├── 风险指标监控
│   ├── 流动性风险
│   ├── 盈利能力风险
│   ├── 偿债能力风险
│   └── 运营风险
├── 风险预警列表
│   ├── 高风险预警
│   ├── 中风险预警
│   └── 低风险预警
└── 风险应对措施
    ├── 风险缓解建议
    ├── 应急预案
    └── 监控计划
```

#### 15.11.2 财务风险预警组件
**组件名称**: FinancialRiskWarning

**字段设计**:
```typescript
interface FinancialRiskData {
  overallRiskLevel: 'low' | 'medium' | 'high'; // 整体风险等级
  riskIndicators: RiskIndicatorData[]; // 风险指标
  riskWarnings: RiskWarningData[];     // 风险预警
  riskMitigation: RiskMitigationData[]; // 风险缓解
}

interface RiskIndicatorData {
  indicatorName: string;         // 指标名称
  currentValue: number;          // 当前值
  thresholdValue: number;        // 阈值
  riskLevel: 'low' | 'medium' | 'high'; // 风险等级
  trend: 'improving' | 'stable' | 'deteriorating'; // 趋势
}

interface RiskWarningData {
  warningId: string;             // 预警ID
  warningType: string;           // 预警类型
  riskLevel: 'low' | 'medium' | 'high'; // 风险等级
  description: string;           // 预警描述
  impact: string;                // 影响分析
  recommendation: string;        // 建议措施
  createdAt: string;             // 创建时间
  status: 'active' | 'resolved' | 'ignored'; // 状态
}

interface RiskMitigationData {
  riskType: string;              // 风险类型
  mitigationMeasures: string[];  // 缓解措施
  contingencyPlan: string;       // 应急预案
  monitoringPlan: string;        // 监控计划
  responsiblePerson: string;     // 负责人
}
```

### 15.12 财务报表模块

#### 15.12.1 模块结构
```
财务报表模块
├── 模块标题
├── 报表类型选择
│   ├── 资产负债表
│   ├── 利润表
│   ├── 现金流量表
│   └── 财务比率表
├── 报表生成设置
│   ├── 报告期间选择
│   ├── 对比期间选择
│   ├── 报表格式选择
│   └── 详细程度选择
└── 报表展示区域
    ├── 在线预览
    ├── 导出功能
    └── 分享功能
```

#### 15.12.2 财务报表组件
**组件名称**: FinancialReports

**字段设计**:
```typescript
interface FinancialReportData {
  reportType: 'balance_sheet' | 'income_statement' | 'cash_flow' | 'ratio_analysis';
  reportPeriod: string;          // 报告期间
  comparisonPeriod?: string;     // 对比期间
  reportFormat: 'standard' | 'detailed' | 'summary'; // 报表格式
  reportData: any;               // 报表数据（根据报表类型而定）
  generatedAt: string;           // 生成时间
  generatedBy: string;           // 生成人
}

interface BalanceSheetData {
  assets: {
    currentAssets: AssetItem[];  // 流动资产
    nonCurrentAssets: AssetItem[]; // 非流动资产
    totalAssets: number;         // 资产总计
  };
  liabilities: {
    currentLiabilities: LiabilityItem[]; // 流动负债
    nonCurrentLiabilities: LiabilityItem[]; // 非流动负债
    totalLiabilities: number;    // 负债总计
  };
  equity: {
    paidInCapital: number;       // 实收资本
    retainedEarnings: number;    // 留存收益
    totalEquity: number;         // 所有者权益总计
  };
}

interface AssetItem {
  itemName: string;              // 项目名称
  currentAmount: number;         // 本期金额
  previousAmount?: number;       // 上期金额
  percentage: number;            // 占总资产比例
}

interface LiabilityItem {
  itemName: string;              // 项目名称
  currentAmount: number;         // 本期金额
  previousAmount?: number;       // 上期金额
  percentage: number;            // 占总负债比例
}
```

#### 15.12.3 报表生成功能
**报表生成流程**:
1. 选择报表类型和报告期间
2. 设置报表格式和详细程度
3. 系统自动生成报表数据
4. 在线预览报表内容
5. 支持导出为PDF、Excel格式
6. 支持分享给相关人员

**报表自动化功能**:
- **定时生成**: 设置定时自动生成报表
- **邮件发送**: 自动发送报表给指定人员
- **模板管理**: 管理报表模板和格式
- **历史版本**: 保存报表历史版本

## 16. 通用组件设计

### 6.1 时间筛选组件库

#### 6.1.1 全局时间选择器
**组件名称**: GlobalTimeRangePicker

**功能特点**:
- 支持快捷时间选择（今日、本周、本月、本季度、本年度）
- 支持自定义时间范围选择
- 支持周期性选择（年度、季度、月度）
- 时间范围验证和格式化
- 与URL参数同步

**字段设计**:
```typescript
interface GlobalTimeRange {
  type: 'quick' | 'custom' | 'period';
  quickType?: 'today' | 'week' | 'month' | 'quarter' | 'year';
  customRange?: {
    startDate: string;           // YYYY-MM-DD
    endDate: string;             // YYYY-MM-DD
  };
  period?: {
    type: 'yearly' | 'quarterly' | 'monthly';
    year: number;
    quarter?: number;            // 1-4
    month?: number;              // 1-12
  };
  label: string;                 // 显示标签
  isValid: boolean;              // 是否有效
}
```

#### 6.1.2 模块级时间筛选器
**组件名称**: ModuleTimeFilter

**独立筛选特性**:
- 每个模块独立的时间筛选状态
- 支持与全局时间同步
- 筛选状态本地存储
- 快速重置功能

### 6.2 数据表格组件库

#### 6.2.1 增强型数据表格
**组件名称**: EnhancedDataTable

**核心功能**:
- **虚拟滚动**: 支持大数据量渲染
- **列配置**: 用户自定义显示列
- **多级排序**: 支持多列组合排序
- **高级筛选**: 多条件组合筛选
- **数据导出**: Excel/CSV/PDF格式导出
- **行选择**: 单选/多选支持
- **行展开**: 支持嵌套数据展示

**配置接口**:
```typescript
interface TableConfig {
  columns: TableColumn[];        // 列配置
  dataSource: any[];             // 数据源
  pagination: PaginationConfig;  // 分页配置
  sorting: SortingConfig;        // 排序配置
  filtering: FilteringConfig;    // 筛选配置
  selection: SelectionConfig;    // 选择配置
  export: ExportConfig;          // 导出配置
  virtualization: boolean;       // 是否启用虚拟滚动
}

interface TableColumn {
  key: string;                   // 列键
  title: string;                 // 列标题
  dataType: 'string' | 'number' | 'date' | 'currency' | 'percentage';
  width?: number;                // 列宽
  fixed?: 'left' | 'right';      // 固定列
  sortable?: boolean;            // 是否可排序
  filterable?: boolean;          // 是否可筛选
  exportable?: boolean;          // 是否可导出
  formatter?: (value: any) => string; // 格式化函数
  render?: (value: any, record: any) => React.ReactNode; // 自定义渲染
}
```

#### 6.2.2 客户毛利明细表格
**组件名称**: CustomerProfitDetailTable

**专用功能**:
- 客户信息快速查看
- 毛利构成分析
- 平台数据钻取
- 客户风险标识
- 续费状态提醒

### 6.3 图表组件库

#### 6.3.1 业务指标卡片
**组件名称**: BusinessMetricCard

**卡片类型**:
- **数值卡片**: 显示单一指标数值
- **对比卡片**: 显示目标与完成对比
- **趋势卡片**: 显示趋势变化
- **排名卡片**: 显示排名信息

**字段设计**:
```typescript
interface MetricCardConfig {
  type: 'value' | 'comparison' | 'trend' | 'ranking';
  title: string;                 // 卡片标题
  value: number;                 // 主要数值
  unit: string;                  // 单位
  target?: number;               // 目标值（对比类型）
  trend?: {                      // 趋势数据
    direction: 'up' | 'down' | 'stable';
    value: number;
    period: string;
  };
  ranking?: {                    // 排名数据
    current: number;
    total: number;
    change: number;
  };
  color: string;                 // 主题色
  icon: string;                  // 图标
  clickable?: boolean;           // 是否可点击
  onClick?: () => void;          // 点击回调
}
```

#### 6.3.2 平台分布图表
**组件名称**: PlatformDistributionChart

**图表类型**:
- **饼图**: 显示平台占比分布
- **柱状图**: 显示平台具体数值
- **组合图**: 饼图+柱状图组合显示

**交互功能**:
- 图表类型切换
- 数据钻取
- 图例筛选
- 数据标签显示

### 6.4 筛选组件库

#### 6.4.1 高级筛选器
**组件名称**: AdvancedFilter

**筛选类型**:
- **文本筛选**: 支持模糊搜索、精确匹配
- **数值筛选**: 支持范围筛选、比较筛选
- **日期筛选**: 支持日期范围、相对日期
- **选择筛选**: 支持单选、多选、级联选择
- **自定义筛选**: 支持复杂业务逻辑筛选

**筛选器配置**:
```typescript
interface FilterConfig {
  filters: FilterItem[];         // 筛选项配置
  layout: 'horizontal' | 'vertical' | 'grid'; // 布局方式
  collapsible: boolean;          // 是否可折叠
  searchable: boolean;           // 是否支持搜索
  saveable: boolean;             // 是否可保存筛选方案
}

interface FilterItem {
  key: string;                   // 筛选键
  label: string;                 // 筛选标签
  type: 'text' | 'number' | 'date' | 'select' | 'multiSelect' | 'cascade';
  options?: SelectOption[];      // 选择项（选择类型）
  placeholder?: string;          // 占位符
  defaultValue?: any;            // 默认值
  validator?: (value: any) => boolean; // 验证函数
}
```

### 6.5 导出组件库

#### 6.5.1 数据导出器
**组件名称**: DataExporter

**导出格式**:
- **Excel**: 支持多工作表、样式设置
- **CSV**: 支持编码选择、分隔符设置
- **PDF**: 支持表格、图表导出
- **图片**: 支持图表导出为PNG/JPG

**导出配置**:
```typescript
interface ExportConfig {
  format: 'excel' | 'csv' | 'pdf' | 'image';
  filename: string;              // 文件名
  sheetName?: string;            // 工作表名（Excel）
  includeHeaders: boolean;       // 是否包含表头
  includeFilters: boolean;       // 是否包含筛选条件
  customFields?: string[];       // 自定义导出字段
  styling?: ExportStyling;       // 样式配置
}

interface ExportStyling {
  headerStyle?: CellStyle;       // 表头样式
  dataStyle?: CellStyle;         // 数据样式
  alternateRowColor?: string;    // 交替行颜色
  borderStyle?: BorderStyle;     // 边框样式
}
```

### 6.6 权限控制组件

#### 6.6.1 角色权限包装器
**组件名称**: RolePermissionWrapper

**权限控制**:
- 基于角色的组件显示控制
- 基于权限的功能启用控制
- 数据范围权限控制
- 操作权限控制

**权限配置**:
```typescript
interface PermissionConfig {
  requiredRole?: string[];       // 需要的角色
  requiredPermissions?: string[]; // 需要的权限
  dataScope?: 'all' | 'team' | 'personal'; // 数据范围
  fallbackComponent?: React.ReactNode; // 无权限时的替代组件
  onUnauthorized?: () => void;   // 无权限回调
}
```

### 6.7 通知提醒组件

#### 6.7.1 业务提醒组件
**组件名称**: BusinessNotification

**提醒类型**:
- **续费提醒**: 客户续费到期提醒
- **目标提醒**: 目标完成进度提醒
- **风险提醒**: 客户流失风险提醒
- **任务提醒**: 待办任务提醒

**提醒配置**:
```typescript
interface NotificationConfig {
  type: 'renewal' | 'target' | 'risk' | 'task';
  priority: 'high' | 'medium' | 'low';
  title: string;                 // 提醒标题
  message: string;               // 提醒内容
  actionable: boolean;           // 是否可操作
  actions?: NotificationAction[]; // 操作按钮
  autoClose?: number;            // 自动关闭时间（秒）
}

interface NotificationAction {
  label: string;                 // 按钮标签
  type: 'primary' | 'secondary' | 'danger';
  onClick: () => void;           // 点击回调
}
```

## 7. 响应式设计

### 7.1 断点设计
```css
/* 断点定义 */
$breakpoints: (
  xs: 0,
  sm: 576px,
  md: 768px,
  lg: 992px,
  xl: 1200px,
  xxl: 1400px
);
```

### 7.2 布局适配
- **桌面端（≥1200px）**: 完整功能展示
- **平板端（768px-1199px）**: 卡片堆叠布局
- **移动端（<768px）**: 单列布局，功能简化

### 7.3 组件响应式
- 表格在小屏幕下支持横向滚动
- 图表自适应容器大小
- 筛选条件在移动端折叠显示

## 8. 业务逻辑与计算规则

### 8.1 毛利计算规则

#### 8.1.1 毛利构成定义
**毛利计算公式**:
```
毛利 = 服务费 + 返点
```

**各项指标说明**:
- **服务费**: 客户支付给公司的服务费用
- **返点**: 平台返还给公司的费用
- **消费**: 客户在各平台的广告消费金额（不计入毛利）
- **毛利率**: 毛利 ÷ 消费 × 100%

#### 8.1.2 平台毛利分配规则
**平台分类**:
- **Google**: Google Ads平台
- **Meta**: Facebook/Instagram广告平台
- **Criteo**: Criteo广告平台
- **Bing**: Microsoft Bing广告平台
- **内容营销及其他**: 其他平台和内容营销服务

**分配原则**:
- 按客户在各平台的实际消费和服务费进行分配
- 返点按平台政策和合同约定进行分配
- 跨平台服务费按服务工作量比例分配

### 8.2 客户分类与状态定义

#### 8.2.1 客户类型分类
**新客户定义**:
- 2025年及以后首次签约的客户
- 包含重新合作的历史客户

**老客户定义**:
- 2025年前已签约并持续合作的客户
- 包含续费客户

#### 8.2.2 客户状态分类
**客户状态定义**:
- **活跃客户**: 当前有效合同期内的客户
- **非活跃客户**: 合同到期但未续费的客户
- **流失客户**: 连续3个月无业务往来的客户
- **潜在客户**: 正在洽谈中的客户

#### 8.2.3 流失客户判定规则
**流失判定标准**:
1. 连续3个月无广告消费记录
2. 合同到期后90天内未续费
3. 主动通知终止合作关系

**流失影响计算**:
- **预估流失毛利**: 基于客户上一合作周期的平均月毛利 × 12个月
- **预估流失服务费**: 基于客户上一合作周期的平均月服务费 × 12个月
- **预估流失返点**: 基于客户上一合作周期的平均月返点 × 12个月

### 8.3 目标完成率计算规则

#### 8.3.1 单项完成率计算
**服务费完成率**:
```
服务费完成率 = 实际服务费 ÷ 服务费目标 × 100%
```

**新单完成率**:
```
新单完成率 = 实际新单数 ÷ 新单目标 × 100%
```

#### 8.3.2 综合完成率计算
**完成总比例计算公式**:
```
完成总比例 = (服务费完成率 × 服务费权重 + 新单完成率 × 新单权重) ÷ 100%
```

**默认权重设置**:
- 服务费权重: 60%
- 新单权重: 40%

### 8.4 续费管理规则

#### 8.4.1 续费优先级判定
**高优先级客户**:
- 历史年毛利 > 50万元
- 合作年限 > 2年
- 客户满意度 > 4.0分

**中优先级客户**:
- 历史年毛利 10-50万元
- 合作年限 1-2年
- 客户满意度 3.0-4.0分

**低优先级客户**:
- 历史年毛利 < 10万元
- 合作年限 < 1年
- 客户满意度 < 3.0分

#### 8.4.2 续费提醒时间规则
**提醒时间节点**:
- **90天前**: 初次续费意向沟通
- **60天前**: 正式续费方案提交
- **30天前**: 续费合同签署
- **7天前**: 紧急续费提醒

### 8.5 排名与评级规则

#### 8.5.1 销售人员排名规则
**排名依据**:
1. 综合完成率（权重50%）
2. 毛利完成额（权重30%）
3. 客户满意度（权重20%）

**排名更新频率**:
- 实时排名: 每日更新
- 月度排名: 每月1日更新
- 季度排名: 每季度首日更新

#### 8.5.2 客户价值评级规则
**客户评级标准**:
- **5星客户**: 年毛利 > 100万元
- **4星客户**: 年毛利 50-100万元
- **3星客户**: 年毛利 20-50万元
- **2星客户**: 年毛利 5-20万元
- **1星客户**: 年毛利 < 5万元

### 8.6 数据更新与同步规则

#### 8.6.1 数据更新频率
**实时数据**:
- 服务费数据: 每日更新
- 消费数据: 每日更新
- 客户状态: 实时更新

**定期数据**:
- 返点数据: 每月更新
- 客户满意度: 每季度更新
- 年度目标: 每年更新

#### 8.6.2 数据一致性保证
**数据校验规则**:
- 毛利 = 服务费 + 返点（自动校验）
- 完成率不能超过1000%（异常提醒）
- 客户状态变更需要审批确认

**数据同步机制**:
- 跨模块数据自动同步
- 异常数据自动标记
- 数据变更日志记录

## 9. 用户体验设计

### 9.1 交互流程设计

#### 9.1.1 角色切换流程
**用户操作流程**:
1. 用户点击顶部导航栏的角色切换器
2. 系统显示可切换角色下拉菜单
3. 用户选择目标角色
4. 系统显示角色切换确认对话框
5. 用户确认后，系统切换角色并刷新页面数据
6. 页面显示新角色对应的看板内容

**交互细节**:
- 角色切换器显示当前角色名称和图标
- 下拉菜单显示所有可切换角色，当前角色标记为选中状态
- 确认对话框提示角色切换后的权限变化
- 切换过程显示加载动画，避免用户重复操作
- 切换完成后显示成功提示信息

#### 9.1.2 时间筛选交互流程
**全局时间选择流程**:
1. 用户点击页面顶部时间选择器
2. 系统展开时间选择面板
3. 用户选择快捷时间或自定义时间范围
4. 系统验证时间范围有效性
5. 确认后自动刷新所有模块数据
6. 时间选择器显示当前选中的时间范围

**模块级时间筛选流程**:
1. 用户点击模块标题右侧的时间筛选器
2. 系统展开该模块的时间筛选选项
3. 用户选择时间范围
4. 系统仅刷新当前模块数据
5. 模块标题显示当前筛选的时间范围

#### 9.1.3 数据钻取交互流程
**客户详情查看流程**:
1. 用户在客户列表中点击客户名称
2. 系统在右侧打开客户详情侧边栏
3. 侧边栏显示客户基本信息、合作历史、毛利数据等
4. 用户可在侧边栏中进行进一步操作（编辑、续费等）
5. 用户点击关闭按钮或点击其他区域关闭侧边栏

**平台数据钻取流程**:
1. 用户点击平台分布图表中的某个平台
2. 系统展开该平台的详细数据
3. 显示该平台的客户列表、服务费明细等
4. 用户可进一步筛选和分析该平台数据

### 9.2 响应式交互设计

#### 9.2.1 桌面端交互设计
**屏幕尺寸**: ≥1200px

**布局特点**:
- 多列网格布局，充分利用屏幕空间
- 侧边栏和模态框用于详情展示
- 悬停效果增强交互反馈
- 支持键盘快捷键操作

**交互优化**:
- 鼠标悬停显示详细信息提示
- 右键菜单提供快捷操作
- 拖拽排序支持个性化布局
- 多窗口支持，可同时查看多个模块

#### 9.2.2 平板端交互设计
**屏幕尺寸**: 768px-1199px

**布局调整**:
- 卡片堆叠布局，减少并列显示
- 侧边栏改为全屏模态框
- 图表自适应容器大小
- 筛选条件折叠显示

**交互适配**:
- 触摸友好的按钮尺寸
- 滑动手势支持页面切换
- 长按显示上下文菜单
- 双击缩放图表内容

#### 9.2.3 移动端交互设计
**屏幕尺寸**: <768px

**布局简化**:
- 单列布局，垂直滚动浏览
- 核心指标卡片优先显示
- 表格横向滚动查看
- 筛选面板抽屉式展开

**交互优化**:
- 大按钮设计，便于触摸操作
- 下拉刷新数据
- 上滑加载更多内容
- 手势导航支持

### 9.3 数据加载与状态管理

#### 9.3.1 加载状态设计
**初始加载**:
- 页面骨架屏显示，避免白屏等待
- 核心指标优先加载显示
- 图表和表格数据延迟加载
- 加载进度条显示整体进度

**数据刷新**:
- 手动刷新按钮，支持单模块刷新
- 自动刷新机制，可配置刷新间隔
- 增量更新，仅更新变化的数据
- 刷新状态提示，避免重复操作

#### 9.3.2 错误状态处理
**网络错误**:
- 显示网络连接错误提示
- 提供重试按钮
- 离线模式下显示缓存数据
- 网络恢复后自动重新加载

**数据错误**:
- 显示数据异常提示信息
- 提供问题反馈入口
- 部分数据错误不影响其他模块
- 错误日志自动上报

#### 9.3.3 性能优化策略
**数据缓存**:
- 客户端缓存常用数据
- 智能预加载相关数据
- 缓存过期自动更新
- 内存管理避免泄漏

**渲染优化**:
- 虚拟滚动处理大数据量
- 图表按需渲染
- 组件懒加载
- 防抖节流优化交互

### 9.4 用户个性化设置

#### 9.4.1 看板布局个性化
**模块排序**:
- 拖拽调整模块显示顺序
- 隐藏不需要的模块
- 自定义模块大小
- 布局设置保存到用户配置

**数据显示个性化**:
- 自定义指标卡片显示内容
- 表格列显示配置
- 图表类型选择
- 数据精度设置

#### 9.4.2 筛选条件保存
**常用筛选方案**:
- 保存常用的筛选条件组合
- 快速应用已保存的筛选方案
- 分享筛选方案给团队成员
- 定时报告基于保存的筛选条件

**默认设置**:
- 用户登录后自动应用默认筛选
- 角色切换后应用对应角色的默认设置
- 时间范围记忆用户习惯
- 排序方式个性化设置

### 9.5 协作功能设计

#### 9.5.1 数据分享功能
**报告分享**:
- 生成看板快照分享链接
- 导出PDF报告发送邮件
- 定时报告自动发送
- 分享权限控制

**评论协作**:
- 在数据异常处添加评论
- @提醒相关人员关注
- 评论历史记录查看
- 问题跟踪和解决状态

#### 9.5.2 提醒通知功能
**业务提醒**:
- 目标完成进度提醒
- 客户续费到期提醒
- 数据异常警报
- 重要客户流失预警

**通知方式**:
- 系统内消息通知
- 邮件通知
- 短信通知（紧急情况）
- 微信/钉钉群通知

### 9.6 帮助与引导设计

#### 9.6.1 新手引导
**功能引导**:
- 首次使用时的功能介绍
- 关键操作的步骤指引
- 交互热点提示
- 渐进式功能解锁

**帮助文档**:
- 在线帮助文档
- 视频教程
- 常见问题解答
- 操作技巧分享

#### 9.6.2 智能提示
**操作建议**:
- 基于用户行为的智能建议
- 数据分析洞察提示
- 最佳实践推荐
- 效率提升建议

**错误预防**:
- 操作前的风险提示
- 数据输入格式验证
- 批量操作确认
- 误操作撤销功能

## 

**文档状态**: 销售部门、运营部门、财务部门看板产品设计完成
**适用范围**:
- 销售部门：销售总监、销售经理、销售人员
- 运营部门：项目总监、项目经理、Google优化师、Meta优化师、Criteo优化师、Bing优化师
- 财务部门：财务总监

**下一步计划**:
1. 完成其他部门看板设计（如有）
2. 整合完整的业务看板产品设计文档
3. 制定详细的UI设计规范
4. 启动开发实施计划

**版本更新记录**:
- v1.0: 完成销售部门看板功能设计（销售总监、销售经理、销售人员）
- v1.1: 完成运营部门管理层看板功能设计（项目总监、项目经理）
- v1.2: 完成运营部门优化师看板功能设计（Google优化师、Meta优化师、Criteo优化师、Bing优化师）
- v1.3: 完成财务部门看板功能设计（财务总监）

**运营部门看板特色功能**:

**管理层看板（项目总监、项目经理）**:
1. **总计与部门双维度分析**: 项目总监可查看总计和部门两个维度的数据
2. **客户质量评估**: 基于消费金额的客户分段分析（10万美金以上、5-10万美金、3-5万美金、1.5-3万美金、1.5万以下美金）
3. **平台毛利贡献分析**: 详细的Google、Meta、Criteo、Bing平台维度毛利分析
4. **新老客户流失分析**: 完整的客户生命周期分析（2025前老客户、2025年新客户、流失客户）
5. **客户贡献明细**: 详细的客户贡献数据和分平台服务费、消费、返点分析
6. **平台新增及流失**: 各平台项目数、新增客户数、流失客户数的综合分析

**优化师看板（Google、Meta、Criteo、Bing优化师）**:
1. **差异化功能模块**: 不同优化师拥有不同数量的功能模块
   - Google/Meta优化师：8个功能模块（运营目标、客户分析、质量评估、账户余额、数据总览、主平台广告数据、Bing广告数据）
   - Criteo/Bing优化师：3个功能模块（账户余额、数据总览、主平台广告数据）
2. **账户余额管理**: 实时监控客户广告账户余额，预警余额不足
3. **异常数据监控**: 自动检测CPC、花费、转化异常并及时提醒
4. **跨平台数据对比**: 支持查看客户在不同平台的投放效果对比
5. **客户分级管理**: 基于消费和ROI的ABC客户分级系统
6. **专业广告数据**: 详细的广告投放数据分析（展示、点击、转化、ROAS等）
7. **预计花费天数**: 基于历史花费预测账户余额使用天数

**财务部门看板特色功能**:
1. **全面财务分析**: 收入分析、成本分析、利润分析、现金流分析的完整财务体系
2. **财务比率分析**: 盈利能力、偿债能力、运营能力比率的全面监控
3. **预算执行分析**: 预算与实际的差异分析和执行情况监控
4. **应收账款管理**: 账龄分析、客户应收分析、风险客户识别
5. **财务风险预警**: 多维度风险指标监控和预警机制
6. **财务报表生成**: 资产负债表、利润表、现金流量表的自动生成
7. **行业对比分析**: 与行业基准的对比分析
8. **财务自动化**: 定时报表生成、自动邮件发送、模板管理
